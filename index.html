<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>別問的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="別問的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="別問的博客">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="別問的博客">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="別問的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="/assets/blogImg/leslie.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">別問</a></h1>
		</hgroup>

		
		<p class="header-subtitle">golang开发者，关注Docker技术</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://github.com/torfuzx/" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/notask/" title="weibo">weibo</a>
					        
								<a class="mail" target="_blank" href="mailto://torfu@qq.com/" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Atom/" style="font-size: 15px;">Atom</a> <a href="/tags/Chromium/" style="font-size: 10px;">Chromium</a> <a href="/tags/Fedora/" style="font-size: 15px;">Fedora</a> <a href="/tags/Go/" style="font-size: 20px;">Go</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Log/" style="font-size: 10px;">Log</a> <a href="/tags/Logstash/" style="font-size: 10px;">Logstash</a> <a href="/tags/NodeJS/" style="font-size: 15px;">NodeJS</a> <a href="/tags/Sublime/" style="font-size: 15px;">Sublime</a> <a href="/tags/Virtualbox/" style="font-size: 10px;">Virtualbox</a> <a href="/tags/胡扯/" style="font-size: 10px;">胡扯</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://laoxu.blog.51cto.com/">老徐的私房菜</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">一个不入流的Go程序员，码畜</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">別問</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="/assets/blogImg/leslie.png" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">別問</h1>
			</hgroup>
			
			<p class="header-subtitle">golang开发者，关注Docker技术</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://github.com/torfuzx/" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/notask/" title="weibo">weibo</a>
			        
						<a class="mail" target="_blank" href="mailto://torfu@qq.com/" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-Golang-设计模式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/Golang-设计模式/" class="article-date">
  	<time datetime="2015-10-21T03:12:34.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/Golang-设计模式/">Golang 设计模式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="说明">说明</h1><p>主要是根据《HEAD FIRST 设计模式》这本书里面的模式的golang版本实现。</p>
<h2 id="策略模式">策略模式</h2><h3 id="策略模式：定义算法族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。——《HEAD_FIRST_设计模式》">策略模式：定义算法族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">package strategy</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////////</span></span><br><span class="line">type <span class="type">FlyBehavior</span> interface &#123;</span><br><span class="line">    <span class="type">Fly</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">QuackBehavior</span> interface &#123;</span><br><span class="line">    <span class="type">Quack</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Duck</span> interface &#123;</span><br><span class="line">    <span class="type">FlyBehavior</span></span><br><span class="line">    <span class="type">QuackBehavior</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">type <span class="type">FlyWithWings</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(s *FlyWithWings)</span></span> <span class="type">Fly</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Fly with wings!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">FlyNoWay</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(s *FlyNoWay)</span></span> <span class="type">Fly</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Fly no way!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Quack</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(s *Quack)</span></span> <span class="type">Quack</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Quack!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Squeak</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(s *Squeak)</span></span> <span class="type">Quack</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Squeak!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">MuteQuack</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(s *MuteQuack)</span></span> <span class="type">Quack</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Mute quack!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">type <span class="type">MallardDuck</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    <span class="type">FlyBehavior</span></span><br><span class="line">    <span class="type">QuackBehavior</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewMallardDuck</span><span class="params">()</span></span> *<span class="type">MallardDuck</span> &#123;</span><br><span class="line">    ret := &amp;<span class="type">MallardDuck</span>&#123;&amp;<span class="type">FlyWithWings</span>&#123;&#125;, &amp;<span class="type">Quack</span>&#123;&#125;&#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">RedHeadDuck</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    <span class="type">FlyBehavior</span></span><br><span class="line">    <span class="type">QuackBehavior</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewRedHeadDuck</span><span class="params">()</span></span> *<span class="type">RedHeadDuck</span> &#123;</span><br><span class="line">    ret := &amp;<span class="type">RedHeadDuck</span>&#123;&amp;<span class="type">FlyNoWay</span>&#123;&#125;, &amp;<span class="type">Quack</span>&#123;&#125;&#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">RubberDuck</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    <span class="type">FlyBehavior</span></span><br><span class="line">    <span class="type">QuackBehavior</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewRubberDuck</span><span class="params">()</span></span> *<span class="type">RubberDuck</span> &#123;</span><br><span class="line">    ret := &amp;<span class="type">RubberDuck</span>&#123;&amp;<span class="type">FlyNoWay</span>&#123;&#125;, &amp;<span class="type">Squeak</span>&#123;&#125;&#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">DecoyDuck</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    <span class="type">FlyBehavior</span></span><br><span class="line">    <span class="type">QuackBehavior</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewDecoyDuck</span><span class="params">()</span></span> *<span class="type">DecoyDuck</span> &#123;</span><br><span class="line">    ret := &amp;<span class="type">DecoyDuck</span>&#123;&amp;<span class="type">FlyNoWay</span>&#123;&#125;, &amp;<span class="type">MuteQuack</span>&#123;&#125;&#125;</span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="观察者模式">观察者模式</h2><h3 id="观察者模式：在对象之间定义一对多的依赖，这样一来，当一个对象改变状态，依赖它的对象都会收到通知，并自动更新。——《HEAD_FIRST_设计模式》">观察者模式：在对象之间定义一对多的依赖，这样一来，当一个对象改变状态，依赖它的对象都会收到通知，并自动更新。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">package observer</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"container/list"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type <span class="type">Subject</span> interface &#123;</span><br><span class="line">    <span class="type">RegisterObserver</span>(o <span class="type">Observer</span>)</span><br><span class="line">    <span class="type">RemoveObserver</span>(o <span class="type">Observer</span>)</span><br><span class="line">    <span class="type">NotifyObserver</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Observer</span> interface &#123;</span><br><span class="line">    <span class="type">Update</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">DisplayElement</span> interface &#123;</span><br><span class="line">    <span class="type">Display</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">type <span class="type">WeatherData</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    o *list.<span class="type">List</span></span><br><span class="line">    t int <span class="comment">// temperature</span></span><br><span class="line">    h int <span class="comment">// humidity</span></span><br><span class="line">    p int <span class="comment">// pressure</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewWeatherData</span><span class="params">()</span></span> *<span class="type">WeatherData</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">WeatherData</span>)</span><br><span class="line">    r.o = <span class="keyword">new</span>(list.<span class="type">List</span>)</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *WeatherData)</span></span> <span class="type">RegisterObserver</span>(ob <span class="type">Observer</span>) &#123;</span><br><span class="line">    o.o.<span class="type">PushBack</span>(ob)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *WeatherData)</span></span> <span class="type">RemoveObserver</span>(ob <span class="type">Observer</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> e := o.o.<span class="type">Front</span>(); e != <span class="literal">nil</span>; e = e.<span class="type">Next</span>() &#123;</span><br><span class="line">        <span class="keyword">if</span> e.<span class="type">Value</span> == ob &#123;</span><br><span class="line">            o.o.<span class="type">Remove</span>(e)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *WeatherData)</span></span> <span class="type">NotifyObserver</span>() &#123;</span><br><span class="line">    <span class="keyword">for</span> e := o.o.<span class="type">Front</span>(); e != <span class="literal">nil</span>; e = e.<span class="type">Next</span>() &#123;</span><br><span class="line">        e.<span class="type">Value</span>.(<span class="type">Observer</span>).<span class="type">Update</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">type <span class="type">CurrentConditionsDisplay</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *CurrentConditionsDisplay)</span></span> <span class="type">Update</span>() &#123;</span><br><span class="line">    o.<span class="type">Display</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *CurrentConditionsDisplay)</span></span> <span class="type">Display</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"CurrentConditionsDisplay update!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">StatisticsDisplay</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *StatisticsDisplay)</span></span> <span class="type">Update</span>() &#123;</span><br><span class="line">    o.<span class="type">Display</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *StatisticsDisplay)</span></span> <span class="type">Display</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"StatisticsDisplay update!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">ForecastDisplay</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *ForecastDisplay)</span></span> <span class="type">Update</span>() &#123;</span><br><span class="line">    o.<span class="type">Display</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *ForecastDisplay)</span></span> <span class="type">Display</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"ForecastDisplay update!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">ThirdPartyDisplay</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *ThirdPartyDisplay)</span></span> <span class="type">Update</span>() &#123;</span><br><span class="line">    o.<span class="type">Display</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(o *ThirdPartyDisplay)</span></span> <span class="type">Display</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"ThirdPartyDisplay update!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="装饰者模式">装饰者模式</h2><h3 id="装饰者模式：动态地将责任附加到对象上。想要扩展功能，装饰者提供有别于继承的另一种选择。——《HEAD_FIRST_设计模式》">装饰者模式：动态地将责任附加到对象上。想要扩展功能，装饰者提供有别于继承的另一种选择。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">package decorator</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////</span></span><br><span class="line">type <span class="type">Beverage</span> interface &#123;</span><br><span class="line">    <span class="type">GetDescription</span>() string</span><br><span class="line">    <span class="type">Cost</span>() int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">CondimentDecorator</span> interface &#123;</span><br><span class="line">    <span class="type">GetDescription</span>() string</span><br><span class="line">    <span class="type">Cost</span>() int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////</span></span><br><span class="line">type <span class="type">HouseBlend</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *HouseBlend)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *HouseBlend)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"HouseBlend"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">DarkRoast</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *DarkRoast)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *DarkRoast)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"DarkRoast"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Espresso</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Espresso)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Espresso)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Espresso"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Decaf</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Decaf)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Decaf)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Decaf"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////</span></span><br><span class="line">type <span class="type">Milk</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    beverage <span class="type">Beverage</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewMilk</span><span class="params">(b Beverage)</span></span> *<span class="type">Milk</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Milk</span>)</span><br><span class="line">    r.beverage = b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Milk)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">Cost</span>() + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Milk)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">GetDescription</span>() + <span class="string">",Milk"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Mocha</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    beverage <span class="type">Beverage</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewMocha</span><span class="params">(b Beverage)</span></span> *<span class="type">Mocha</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Mocha</span>)</span><br><span class="line">    r.beverage = b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Mocha)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">Cost</span>() + <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Mocha)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">GetDescription</span>() + <span class="string">",Mocha"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Soy</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    beverage <span class="type">Beverage</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewSoy</span><span class="params">(b Beverage)</span></span> *<span class="type">Soy</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Soy</span>)</span><br><span class="line">    r.beverage = b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Soy)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">Cost</span>() + <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Soy)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">GetDescription</span>() + <span class="string">",Soy"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Whip</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    beverage <span class="type">Beverage</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewWhip</span><span class="params">(b Beverage)</span></span> *<span class="type">Whip</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Whip</span>)</span><br><span class="line">    r.beverage = b</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Whip)</span></span> <span class="type">Cost</span>() int &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">Cost</span>() + <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(d *Whip)</span></span> <span class="type">GetDecription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> d.beverage.<span class="type">GetDescription</span>() + <span class="string">",Whip"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="工厂模式">工厂模式</h2><h3 id="工厂模式：定义了一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。——《HEAD_FIRST_设计模式》">工厂模式：定义了一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br></pre></td><td class="code"><pre><span class="line">package factory</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type PizzaStore interface &#123;</span><br><span class="line">    createPizza(t <span class="built_in">string</span>) Pizza</span><br><span class="line">    OrderPizza(t <span class="built_in">string</span>) Pizza</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Pizza interface &#123;</span><br><span class="line">    prepare()</span><br><span class="line">    bake()</span><br><span class="line">    cut()</span><br><span class="line">    box()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">///////////////////////////////////////////</span><br><span class="line">type NYStylePizzaStore struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePizzaStore)</span> <span class="title">OrderPizza</span><span class="params">(t string)</span> <span class="title">Pizza</span> &#123;</span></span><br><span class="line">    var r Pizza</span><br><span class="line">    r = f.createPizza(t)</span><br><span class="line"></span><br><span class="line">    r.prepare()</span><br><span class="line">    r.bake()</span><br><span class="line">    r.cut()</span><br><span class="line">    r.box()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePizzaStore)</span> <span class="title">createPizza</span><span class="params">(t string)</span> <span class="title">Pizza</span> &#123;</span></span><br><span class="line">    <span class="keyword">switch</span> t &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"cheese"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewNYStyleCheesePizaa()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"veggie"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewNYStyleVeggiePizza()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"clam"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewNYStyleClamPizza()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"pepperoni"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewNYStylePepperoniPizza()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ChicagoStylePizzaStore struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePizzaStore)</span> <span class="title">OrderPizza</span><span class="params">(t string)</span> <span class="title">Pizza</span> &#123;</span></span><br><span class="line">    var r Pizza</span><br><span class="line">    r = f.createPizza(t)</span><br><span class="line"></span><br><span class="line">    r.prepare()</span><br><span class="line">    r.bake()</span><br><span class="line">    r.cut()</span><br><span class="line">    r.box()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePizzaStore)</span> <span class="title">createPizza</span><span class="params">(t string)</span> <span class="title">Pizza</span> &#123;</span></span><br><span class="line">    <span class="keyword">switch</span> t &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"cheese"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewChicagoStyleCheesePizza()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"veggie"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewChicagoStyleVeggiePizza()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"clam"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewChicagoStyleClamPizza()</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"pepperoni"</span>:</span><br><span class="line">        <span class="keyword">return</span> NewChicagoStylePepperoniPizza()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/////////////////////////////////////////////</span><br><span class="line"></span><br><span class="line">type NYStyleCheesePizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNYStyleCheesePizaa</span><span class="params">()</span> *<span class="title">NYStyleCheesePizza</span> &#123;</span></span><br><span class="line">    r := new(NYStyleCheesePizza)</span><br><span class="line">    r.name = <span class="string">"NY Style Sauce and Cheese Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Thin Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Marinara Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Grated Reggiano Chees"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleCheesePizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleCheesePizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleCheesePizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleCheesePizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in official PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type NYStyleVeggiePizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNYStyleVeggiePizza</span><span class="params">()</span> *<span class="title">NYStyleVeggiePizza</span> &#123;</span></span><br><span class="line">    r := new(NYStyleVeggiePizza)</span><br><span class="line">    r.name = <span class="string">"NY Style Veggie Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Thin Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Marinara Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Grated Reggiano Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Garlic"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Onion"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Mushrooms"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Red Pepper"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleVeggiePizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleVeggiePizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleVeggiePizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleVeggiePizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in official PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type NYStyleClamPizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNYStyleClamPizza</span><span class="params">()</span> *<span class="title">NYStyleClamPizza</span> &#123;</span></span><br><span class="line">    r := new(NYStyleClamPizza)</span><br><span class="line">    r.name = <span class="string">"NY Style Clam Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Thin Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Marinara Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Grated Reggiano Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Fresh Clams from Long Island Sound"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleClamPizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleClamPizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleClamPizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStyleClamPizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type NYStylePepperoniPizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNYStylePepperoniPizza</span><span class="params">()</span> *<span class="title">NYStylePepperoniPizza</span> &#123;</span></span><br><span class="line">    r := new(NYStylePepperoniPizza)</span><br><span class="line">    r.name = <span class="string">"NY Style Pepperoni Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Thin Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Marinara Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Grated Reggiano Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Sliced Pepperoni"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Garlic"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Onion"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Mushrooms"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Red Pepper"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePepperoniPizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePepperoniPizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePepperoniPizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *NYStylePepperoniPizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ChicagoStyleCheesePizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewChicagoStyleCheesePizza</span><span class="params">()</span> *<span class="title">ChicagoStyleCheesePizza</span> &#123;</span></span><br><span class="line">    r := new(ChicagoStyleCheesePizza)</span><br><span class="line">    r.name = <span class="string">"Chicago Style Deep Dish Cheese Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Extra Thick Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Plum Tomato Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Shredded Mozzarella Cheese"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleCheesePizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleCheesePizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleCheesePizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleCheesePizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ChicagoStylePepperoniPizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewChicagoStylePepperoniPizza</span><span class="params">()</span> *<span class="title">ChicagoStylePepperoniPizza</span> &#123;</span></span><br><span class="line">    r := new(ChicagoStylePepperoniPizza)</span><br><span class="line">    r.name = <span class="string">"Chicago Style Pepperoni Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Extra Thick Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Plum Tomato Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Shredded Mozzarella Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Black Olives"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Spinach"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Eggplant"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Sliced Pepperoni"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePepperoniPizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePepperoniPizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePepperoniPizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStylePepperoniPizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ChicagoStyleClamPizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewChicagoStyleClamPizza</span><span class="params">()</span> *<span class="title">ChicagoStyleClamPizza</span> &#123;</span></span><br><span class="line">    r := new(ChicagoStyleClamPizza)</span><br><span class="line">    r.name = <span class="string">"Chicago Style Clam Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Extra Thick Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Plum Tomato Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Shredded Mozzarella Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Frozen Clams from Chesapeake Bay"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleClamPizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleClamPizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleClamPizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleClamPizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ChicagoStyleVeggiePizza struct &#123;</span><br><span class="line">    name     <span class="built_in">string</span></span><br><span class="line">    dough    <span class="built_in">string</span></span><br><span class="line">    sauce    <span class="built_in">string</span></span><br><span class="line">    toppings []<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewChicagoStyleVeggiePizza</span><span class="params">()</span> *<span class="title">ChicagoStyleVeggiePizza</span> &#123;</span></span><br><span class="line">    r := new(ChicagoStyleVeggiePizza)</span><br><span class="line">    r.name = <span class="string">"Chicago Deep Dish Veggie Pizza"</span></span><br><span class="line">    r.dough = <span class="string">"Extra Thick Crust Dough"</span></span><br><span class="line">    r.sauce = <span class="string">"Plum Tomato Sauce"</span></span><br><span class="line"></span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Shredded Mozzarella Cheese"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Black Olives"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Spinach"</span>)</span><br><span class="line">    r.toppings = append(r.toppings, <span class="string">"Eggplant"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleVeggiePizza)</span> <span class="title">prepare</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Preparing"</span>, f.name)</span><br><span class="line">    fmt.Println(<span class="string">"Tossing dough..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding sauce..."</span>)</span><br><span class="line">    fmt.Println(<span class="string">"Adding  toppings:"</span>)</span><br><span class="line">    <span class="keyword">for</span> k, _ := range f.toppings &#123;</span><br><span class="line">        fmt.Println(<span class="string">" "</span>, f.toppings[k])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleVeggiePizza)</span> <span class="title">bake</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Bake for 25 minutes at 350"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleVeggiePizza)</span> <span class="title">cut</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Cutting the pizza into diagonal slices"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *ChicagoStyleVeggiePizza)</span> <span class="title">box</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Place pizza in offcial PizzaStore box"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="单例模式">单例模式</h2><h3 id="单例模式：确保一个类只有一个实例，并提供全局访问点。——《HEAD_FIRST_设计模式》">单例模式：确保一个类只有一个实例，并提供全局访问点。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> singleton</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Singleton <span class="keyword">interface</span> &#123;</span><br><span class="line">    PrintSome()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> singleone <span class="keyword">struct</span> &#123;</span><br><span class="line">    v <span class="typename">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> g_singleone *singleone</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> GetInstance(v <span class="typename">int</span>) Singleton &#123;</span><br><span class="line">    <span class="keyword">if</span> g_singleone == <span class="constant">nil</span> &#123;</span><br><span class="line">        g_singleone = &amp;singleone&#123;v&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> g_singleone</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (s *singleone) PrintSome() &#123;</span><br><span class="line">    fmt.Println(<span class="string">"singleton value is"</span>, s.v)</span><br></pre></td></tr></table></figure></p>
<h2 id="命令模式">命令模式</h2><h3 id="命令模式：将请求封装成对象，这可以让你使用不同的请求，队列，或者日志请求来参数化其他对象。命令模式也可以支持撤销操作。——《HEAD_FIRST_设计模式》">命令模式：将请求封装成对象，这可以让你使用不同的请求，队列，或者日志请求来参数化其他对象。命令模式也可以支持撤销操作。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br></pre></td><td class="code"><pre><span class="line">package command</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const slotnums = <span class="number">7</span></span><br><span class="line"></span><br><span class="line">type <span class="type">Command</span> interface &#123;</span><br><span class="line">    execute()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////</span></span><br><span class="line">type <span class="type">RemoteControl</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    onCommands  []<span class="type">Command</span></span><br><span class="line">    offCommands []<span class="type">Command</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewRemoteControl</span><span class="params">()</span></span> *<span class="type">RemoteControl</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">RemoteControl</span>)</span><br><span class="line">    r.onCommands = make([]<span class="type">Command</span>, slotnums, slotnums)</span><br><span class="line">    r.offCommands = make([]<span class="type">Command</span>, slotnums, slotnums)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *RemoteControl)</span></span> <span class="type">SetCommand</span>(s uint, on <span class="type">Command</span>, off <span class="type">Command</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> s &gt;= slotnums &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">c</span>.onCommands[s] = on</span><br><span class="line">    <span class="built_in">c</span>.offCommands[s] = off</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *RemoteControl)</span></span> <span class="type">OnButtonWasPushed</span>(s uint) &#123;</span><br><span class="line">    <span class="keyword">if</span> s &gt;= slotnums &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">c</span>.onCommands[s].execute()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *RemoteControl)</span></span> <span class="type">OffButtonWasPushed</span>(s uint) &#123;</span><br><span class="line">    <span class="keyword">if</span> s &gt;= slotnums &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">c</span>.offCommands[s].execute()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////</span></span><br><span class="line">type <span class="type">Light</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Light)</span></span> on() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"light is on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Light)</span></span> off() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"light is off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Stereo</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> on() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo is on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> off() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo is off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> setCd() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo set cd!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> setDvd() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo set dvd!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> setRadio() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo set radio!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Stereo)</span></span> setVolume() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"stereo set volume!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">GarageDoor</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoor)</span></span> up() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"garage door is up!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoor)</span></span> down() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"garage door is down!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoor)</span></span> stop() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"garage door is stopped!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoor)</span></span> lightOn() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"garage door light is on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoor)</span></span> lightOff() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"garage door light is off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////////////////////////////</span></span><br><span class="line">type <span class="type">LightOnCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    light *<span class="type">Light</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewLightOnCommand</span><span class="params">(l *Light)</span></span> *<span class="type">LightOnCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">LightOnCommand</span>)</span><br><span class="line">    r.light = l</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *LightOnCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.light.on()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">LightOffCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    light *<span class="type">Light</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewLightOffCommand</span><span class="params">(l *Light)</span></span> *<span class="type">LightOffCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">LightOffCommand</span>)</span><br><span class="line">    r.light = l</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *LightOffCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.light.off()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">StereoOnWithCDCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    stereo *<span class="type">Stereo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewStereoOnWithCDCommand</span><span class="params">(s *Stereo)</span></span> *<span class="type">StereoOnWithCDCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">StereoOnWithCDCommand</span>)</span><br><span class="line">    r.stereo = s</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *StereoOnWithCDCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.stereo.on()</span><br><span class="line">    <span class="built_in">c</span>.stereo.setCd()</span><br><span class="line">    <span class="built_in">c</span>.stereo.setVolume()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">StereoOffCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    stereo *<span class="type">Stereo</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewStereoOffCommand</span><span class="params">(s *Stereo)</span></span> *<span class="type">StereoOffCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">StereoOffCommand</span>)</span><br><span class="line">    r.stereo = s</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *StereoOffCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.stereo.off()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">GarageDoorDownCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    garage *<span class="type">GarageDoor</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewGarageDoorDownCommand</span><span class="params">(g *GarageDoor)</span></span> *<span class="type">GarageDoorDownCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">GarageDoorDownCommand</span>)</span><br><span class="line">    r.garage = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoorDownCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.garage.down()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">GarageDoorUpCommand</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    garage *<span class="type">GarageDoor</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewGarageDoorUpCommand</span><span class="params">(g *GarageDoor)</span></span> *<span class="type">GarageDoorUpCommand</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">GarageDoorUpCommand</span>)</span><br><span class="line">    r.garage = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *GarageDoorUpCommand)</span></span> execute() &#123;</span><br><span class="line">    <span class="built_in">c</span>.garage.up()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="适配器模式">适配器模式</h2><h3 id="适配器模式：将一个类的接口，转换成客户期望的另一个接口。适配器让原本接口不兼容的类可以合作无间。——《HEAD_FIRST_设计模式》">适配器模式：将一个类的接口，转换成客户期望的另一个接口。适配器让原本接口不兼容的类可以合作无间。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">package adapter</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line">type <span class="type">Duck</span> interface &#123;</span><br><span class="line">    <span class="type">Quack</span>()</span><br><span class="line">    <span class="type">Fly</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Turkey</span> interface &#123;</span><br><span class="line">    <span class="type">Gobble</span>()</span><br><span class="line">    <span class="type">Fly</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">MallardDuck</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *MallardDuck)</span></span> <span class="type">Quack</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Quack"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *MallardDuck)</span></span> <span class="type">Fly</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"I'm flying"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">WildTurkey</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *WildTurkey)</span></span> <span class="type">Gobble</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"Gobble gobble"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *WildTurkey)</span></span> <span class="type">Fly</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"I'm flying a short distance"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">TurkeyAdapter</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    turkey <span class="type">Turkey</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewTurkeyAdapter</span><span class="params">(t Turkey)</span></span> *<span class="type">TurkeyAdapter</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">TurkeyAdapter</span>)</span><br><span class="line">    r.turkey = t</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *TurkeyAdapter)</span></span> <span class="type">Quack</span>() &#123;</span><br><span class="line">    a.turkey.<span class="type">Gobble</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(a *TurkeyAdapter)</span></span> <span class="type">Fly</span>() &#123;</span><br><span class="line">    a.turkey.<span class="type">Fly</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="外观模式">外观模式</h2><h3 id="外观模式：提供了一个统一的接口，用来访问子系统中的一群接口。外观定义了一个高层接口，让子系统更容易使用。——《HEAD_FIRST_设计模式》">外观模式：提供了一个统一的接口，用来访问子系统中的一群接口。外观定义了一个高层接口，让子系统更容易使用。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line">package facade</span><br><span class="line"></span><br><span class="line">import <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line">type PopcornPopper struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *PopcornPopper)</span> <span class="title">On</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"popper on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *PopcornPopper)</span> <span class="title">Off</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"popper off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *PopcornPopper)</span> <span class="title">Pop</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"popper pop!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type TheaterLights struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *TheaterLights)</span> <span class="title">Dim</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"theaterlights dim!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *TheaterLights)</span> <span class="title">On</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"theaterlights on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Screen struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Screen)</span> <span class="title">Down</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"screen down!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Screen)</span> <span class="title">Up</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"screen up!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Projector struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Projector)</span> <span class="title">On</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"projector on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Projector)</span> <span class="title">Off</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"projector off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Projector)</span> <span class="title">WideScreenMode</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"projector widescreenmode!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Amplifier struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Amplifier)</span> <span class="title">On</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"amplifier on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Amplifier)</span> <span class="title">Off</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"amplifier off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Amplifier)</span> <span class="title">SetDvd</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"amplifier setdvd!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Amplifier)</span> <span class="title">SetSurroundSound</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"amplifier setsurroundsound!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *Amplifier)</span> <span class="title">SetVolume</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"amplifier setvolume!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type DvdPlayer struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *DvdPlayer)</span> <span class="title">On</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"dvd on!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *DvdPlayer)</span> <span class="title">Play</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"dvd play!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *DvdPlayer)</span> <span class="title">Stop</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"dvd stop!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *DvdPlayer)</span> <span class="title">Eject</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"dvd eject!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *DvdPlayer)</span> <span class="title">Off</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"dvd off!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type HomeTheaterFacade struct &#123;</span><br><span class="line">    amp       Amplifier</span><br><span class="line">    dvd       DvdPlayer</span><br><span class="line">    projector Projector</span><br><span class="line">    light     TheaterLights</span><br><span class="line">    screen    Screen</span><br><span class="line">    popper    PopcornPopper</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewHomeTheaterFacade</span><span class="params">(a Amplifier, d DvdPlayer, p Projector, l TheaterLights, s Screen, po PopcornPopper)</span> *<span class="title">HomeTheaterFacade</span> &#123;</span></span><br><span class="line">    r := new(HomeTheaterFacade)</span><br><span class="line">    r.amp = a</span><br><span class="line">    r.dvd = d</span><br><span class="line">    r.projector = p</span><br><span class="line">    r.light = l</span><br><span class="line">    r.screen = s</span><br><span class="line">    r.popper = po</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *HomeTheaterFacade)</span> <span class="title">WatchMovie</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"watch movie!"</span>)</span><br><span class="line">    f.popper.On()</span><br><span class="line">    f.popper.Pop()</span><br><span class="line">    f.light.<span class="keyword">Dim</span>()</span><br><span class="line">    f.screen.Down()</span><br><span class="line">    f.projector.On()</span><br><span class="line">    f.projector.WideScreenMode()</span><br><span class="line">    f.amp.On()</span><br><span class="line">    f.amp.SetDvd()</span><br><span class="line">    f.amp.SetSurroundSound()</span><br><span class="line">    f.amp.SetVolume()</span><br><span class="line">    f.dvd.On()</span><br><span class="line">    f.dvd.Play()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(f *HomeTheaterFacade)</span> <span class="title">EndMovie</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"end movie!"</span>)</span><br><span class="line">    f.popper.Off()</span><br><span class="line">    f.light.On()</span><br><span class="line">    f.screen.Up()</span><br><span class="line">    f.projector.Off()</span><br><span class="line">    f.amp.Off()</span><br><span class="line">    f.dvd.Stop()</span><br><span class="line">    f.dvd.Eject()</span><br><span class="line">    f.dvd.Off()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="模板方法模式">模板方法模式</h2><h3 id="模板方法模式：在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以在不改变算法结构的情况下，重新定义算法中的某些步骤。——《HEAD_FIRST_设计模式》">模板方法模式：在一个方法中定义一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以在不改变算法结构的情况下，重新定义算法中的某些步骤。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">package template</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type <span class="type">Caffeine</span> interface &#123;</span><br><span class="line">    brew()</span><br><span class="line">    addCondiments()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////</span></span><br><span class="line">type <span class="type">Tea</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *Tea)</span></span> brew() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"tea brew!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *Tea)</span></span> addCondiments() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"tea addCondiments!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////</span></span><br><span class="line">type <span class="type">Coffee</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *Coffee)</span></span> brew() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"coffee brew!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *Coffee)</span></span> addCondiments() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"coffee addCondiments!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////</span></span><br><span class="line">type <span class="type">CaffeineBeverage</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    <span class="type">Caffeine</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewCaffeineBeverage</span><span class="params">(<span class="built_in">c</span> Caffeine)</span></span> *<span class="type">CaffeineBeverage</span> &#123;</span><br><span class="line">    t := <span class="keyword">new</span>(<span class="type">CaffeineBeverage</span>)</span><br><span class="line">    t.<span class="type">Caffeine</span> = <span class="built_in">c</span></span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *CaffeineBeverage)</span></span> <span class="type">PrepareRecipe</span>() &#123;</span><br><span class="line">    t.boilWater()</span><br><span class="line">    t.brew()</span><br><span class="line">    t.pourInCup()</span><br><span class="line">    t.addCondiments()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *CaffeineBeverage)</span></span> boilWater() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"boilWater!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(t *CaffeineBeverage)</span></span> pourInCup() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"pourInCup!"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="迭代器模式">迭代器模式</h2><h3 id="迭代器模式：提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露其内部的表示。——《HEAD_FIRST_设计模式》">迭代器模式：提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露其内部的表示。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> iterator</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MenuItem <span class="keyword">struct</span> &#123;</span><br><span class="line">    name        <span class="typename">string</span></span><br><span class="line">    description <span class="typename">string</span></span><br><span class="line">    vegetarian  <span class="typename">bool</span></span><br><span class="line">    price       <span class="typename">float32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewMenuItem(n <span class="typename">string</span>, d <span class="typename">string</span>, v <span class="typename">bool</span>, p <span class="typename">float32</span>) *MenuItem &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(MenuItem)</span><br><span class="line">    r.name = n</span><br><span class="line">    r.description = d</span><br><span class="line">    r.vegetarian = v</span><br><span class="line">    r.price = p</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *MenuItem) getName() <span class="typename">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *MenuItem) getDescription() <span class="typename">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i.description</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *MenuItem) getPrice() <span class="typename">float32</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i.price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *MenuItem) isVegetarian() <span class="typename">bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> i.vegetarian</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="keyword">type</span> Menu <span class="keyword">interface</span> &#123;</span><br><span class="line">    createIterator() Iterator</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PancakeHouseMenu <span class="keyword">struct</span> &#123;</span><br><span class="line">    menuItems []*MenuItem</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewPancakeHouseMenu() *PancakeHouseMenu &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(PancakeHouseMenu)</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"K&amp;B's Pancake Breakfast"</span>, <span class="string">"Pancakes with scrambled eggs, and toast"</span>, <span class="constant">true</span>, <span class="number">2.99</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Regular Pancake Breakfast"</span>, <span class="string">"Pancakes with fired eggs, sausage"</span>, <span class="constant">false</span>, <span class="number">2.99</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Blueberry Pancakes"</span>, <span class="string">"Pancakes made with fresh blueberries"</span>, <span class="constant">true</span>, <span class="number">3.49</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Waffles"</span>, <span class="string">"Waffles, with your choice of blueberries or strawberries"</span>, <span class="constant">true</span>, <span class="number">3.59</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *PancakeHouseMenu) createIterator() Iterator &#123;</span><br><span class="line">    <span class="keyword">return</span> NewPancakeHouseMenuIterator(i.menuItems)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="keyword">type</span> DinerMenu <span class="keyword">struct</span> &#123;</span><br><span class="line">    menuItems []*MenuItem</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewDinerMenu() *DinerMenu &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(DinerMenu)</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Vegetarian BLT"</span>, <span class="string">"(Fakin') Bacon with lettuce &amp; tomato on whole wheat"</span>, <span class="constant">true</span>, <span class="number">2.99</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"BLT"</span>, <span class="string">"Bacon with lettuce &amp; tomato on whole wheat"</span>, <span class="constant">false</span>, <span class="number">2.99</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Soup of the day"</span>, <span class="string">"Soup of the day, with a side of potato salad"</span>, <span class="constant">false</span>, <span class="number">3.29</span>))</span><br><span class="line">    r.menuItems = <span class="built_in">append</span>(r.menuItems, NewMenuItem(<span class="string">"Hotdog"</span>, <span class="string">"A hot dog, with saurkraut, relish, onions, topped with cheese"</span>, <span class="constant">false</span>, <span class="number">3.05</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *DinerMenu) createIterator() Iterator &#123;</span><br><span class="line">    <span class="keyword">return</span> NewDinerMenuIterator(i.menuItems)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="keyword">type</span> Iterator <span class="keyword">interface</span> &#123;</span><br><span class="line">    hasNext() <span class="typename">bool</span></span><br><span class="line">    next() <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> PancakeHouseMenuIterator <span class="keyword">struct</span> &#123;</span><br><span class="line">    m []*MenuItem</span><br><span class="line">    p <span class="typename">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewPancakeHouseMenuIterator(m []*MenuItem) *PancakeHouseMenuIterator &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(PancakeHouseMenuIterator)</span><br><span class="line">    r.m = m</span><br><span class="line">    r.p = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *PancakeHouseMenuIterator) hasNext() <span class="typename">bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i.p &gt;= <span class="built_in">len</span>(i.m) || i.m[i.p] == <span class="constant">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *PancakeHouseMenuIterator) next() <span class="keyword">interface</span>&#123;&#125; &#123;</span><br><span class="line">    <span class="keyword">var</span> r <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">    r = i.m[i.p]</span><br><span class="line">    i.p++</span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> DinerMenuIterator <span class="keyword">struct</span> &#123;</span><br><span class="line">    m []*MenuItem</span><br><span class="line">    p <span class="typename">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewDinerMenuIterator(m []*MenuItem) *DinerMenuIterator &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(DinerMenuIterator)</span><br><span class="line">    r.m = m</span><br><span class="line">    r.p = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *DinerMenuIterator) hasNext() <span class="typename">bool</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i.p &gt;= <span class="built_in">len</span>(i.m) || i.m[i.p] == <span class="constant">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="constant">false</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="constant">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *DinerMenuIterator) next() <span class="keyword">interface</span>&#123;&#125; &#123;</span><br><span class="line">    <span class="keyword">var</span> r <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">    r = i.m[i.p]</span><br><span class="line">    i.p++</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////</span></span><br><span class="line"><span class="keyword">type</span> Waitress <span class="keyword">struct</span> &#123;</span><br><span class="line">    p Menu</span><br><span class="line">    d Menu</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> NewWaitress(p Menu, d Menu) *Waitress &#123;</span><br><span class="line">    r := <span class="built_in">new</span>(Waitress)</span><br><span class="line">    r.p = p</span><br><span class="line">    r.d = d</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *Waitress) PrintMenu() &#123;</span><br><span class="line">    it := i.p.createIterator()</span><br><span class="line">    fmt.Println(<span class="string">"MENU\n----\nBREAKFAST"</span>)</span><br><span class="line">    i.printMenu(it)</span><br><span class="line">    it = i.d.createIterator()</span><br><span class="line">    fmt.Println(<span class="string">"\nLUNCH"</span>)</span><br><span class="line">    i.printMenu(it)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">func</span> (i *Waitress) printMenu(it Iterator) &#123;</span><br><span class="line">    <span class="keyword">for</span> it.hasNext() &#123;</span><br><span class="line">        a := it.next()</span><br><span class="line">        t := a.(*MenuItem)</span><br><span class="line"></span><br><span class="line">        fmt.Print(t.getName(), <span class="string">","</span>)</span><br><span class="line">        fmt.Print(t.getPrice(), <span class="string">"--"</span>)</span><br><span class="line">        fmt.Println(t.getDescription())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="组合模式">组合模式</h2><h3 id="组合模式：允许你将对象组成树形结构来表现“整体/部分”的层次结构。组合能让客户以一致的方式处理个别对象和对象组合。——《HEAD_FIRST_设计模式》">组合模式：允许你将对象组成树形结构来表现“整体/部分”的层次结构。组合能让客户以一致的方式处理个别对象和对象组合。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">package composite</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type <span class="type">MenuComponent</span> interface &#123;</span><br><span class="line">    <span class="type">MenuPrint</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Menu</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    name          string</span><br><span class="line">    description   string</span><br><span class="line">    menuComponent []<span class="type">MenuComponent</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewMenu</span><span class="params">(n string, d string)</span></span> *<span class="type">Menu</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Menu</span>)</span><br><span class="line">    r.name = n</span><br><span class="line">    r.description = d</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Menu)</span></span> <span class="type">Add</span>(m <span class="type">MenuComponent</span>) &#123;</span><br><span class="line">    <span class="built_in">c</span>.menuComponent = append(<span class="built_in">c</span>.menuComponent, m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Menu)</span></span> <span class="type">GetName</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Menu)</span></span> <span class="type">GetDescription</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.description</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Menu)</span></span> <span class="type">MenuPrint</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="built_in">c</span>.name)</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="built_in">c</span>.description)</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="string">"-------------------------------"</span>)</span><br><span class="line">    <span class="keyword">for</span> i, <span class="number">_</span> := range <span class="built_in">c</span>.menuComponent &#123;</span><br><span class="line">        <span class="built_in">c</span>.menuComponent[i].<span class="type">MenuPrint</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">MenuItem</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    name        string</span><br><span class="line">    description string</span><br><span class="line">    vegetarian  bool</span><br><span class="line">    price       float32</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewMenuItem</span><span class="params">(n string, d string, v bool, p float32)</span></span> *<span class="type">MenuItem</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">MenuItem</span>)</span><br><span class="line">    r.name = n</span><br><span class="line">    r.description = d</span><br><span class="line">    r.vegetarian = v</span><br><span class="line">    r.price = p</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *MenuItem)</span></span> getName() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *MenuItem)</span></span> getDescription() string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.description</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *MenuItem)</span></span> getPrice() float32 &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.price</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *MenuItem)</span></span> isVegetarian() bool &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">c</span>.vegetarian</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *MenuItem)</span></span> <span class="type">MenuPrint</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="built_in">c</span>.name)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">c</span>.vegetarian &#123;</span><br><span class="line">        fmt.<span class="type">Println</span>(<span class="string">"(v)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="built_in">c</span>.price)</span><br><span class="line">    fmt.<span class="type">Println</span>(<span class="built_in">c</span>.description)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////</span></span><br><span class="line">type <span class="type">Waitress</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    allMenus <span class="type">MenuComponent</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewWaitress</span><span class="params">(a MenuComponent)</span></span> *<span class="type">Waitress</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Waitress</span>)</span><br><span class="line">    r.allMenus = a</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(<span class="built_in">c</span> *Waitress)</span></span> <span class="type">PrintMenu</span>() &#123;</span><br><span class="line">    <span class="built_in">c</span>.allMenus.<span class="type">MenuPrint</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="状态模式">状态模式</h2><h3 id="状态模式：允许对象在内部状态改变时改变它的行为，对象看起来好像修改了它的类。——《HEAD_FIRST_设计模式》">状态模式：允许对象在内部状态改变时改变它的行为，对象看起来好像修改了它的类。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br></pre></td><td class="code"><pre><span class="line">package state</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type State interface &#123;</span><br><span class="line">    insertQuarter()</span><br><span class="line">    ejectQuarter()</span><br><span class="line">    turnCrank()</span><br><span class="line">    dispense()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type SoldOutState struct &#123;</span><br><span class="line">    gMachine *GumballMachine</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewSoldOutState</span><span class="params">(g *GumballMachine)</span> *<span class="title">SoldOutState</span> &#123;</span></span><br><span class="line">    r := new(SoldOutState)</span><br><span class="line">    r.gMachine = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldOutState)</span> <span class="title">insertQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You can't insert a quarter, the machine is sold out"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldOutState)</span> <span class="title">ejectQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You can't eject, you haven't inserted a quarter yet"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldOutState)</span> <span class="title">turnCrank</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You turned, but there are no gumballs"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldOutState)</span> <span class="title">dispense</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"No gumball dispensed"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type NoQuarterState struct &#123;</span><br><span class="line">    gMachine *GumballMachine</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewNoQuarterState</span><span class="params">(g *GumballMachine)</span> *<span class="title">NoQuarterState</span> &#123;</span></span><br><span class="line">    r := new(NoQuarterState)</span><br><span class="line">    r.gMachine = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *NoQuarterState)</span> <span class="title">insertQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You inserted a quarter"</span>)</span><br><span class="line">    s.gMachine.setState(s.gMachine.getHasQuarterState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *NoQuarterState)</span> <span class="title">ejectQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You haven't inserted a quarter"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *NoQuarterState)</span> <span class="title">turnCrank</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You turned, but there's no quarter"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *NoQuarterState)</span> <span class="title">dispense</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You need to pay first"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type HasQuarterState struct &#123;</span><br><span class="line">    gMachine *GumballMachine</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewHasNoQuarterState</span><span class="params">(g *GumballMachine)</span> *<span class="title">HasQuarterState</span> &#123;</span></span><br><span class="line">    r := new(HasQuarterState)</span><br><span class="line">    r.gMachine = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *HasQuarterState)</span> <span class="title">insertQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You can't insert another quarter"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *HasQuarterState)</span> <span class="title">ejectQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Quarter returned"</span>)</span><br><span class="line">    s.gMachine.setState(s.gMachine.getNoQuarterState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *HasQuarterState)</span> <span class="title">turnCrank</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"You turned..."</span>)</span><br><span class="line">    s.gMachine.setState(s.gMachine.getSoldState())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *HasQuarterState)</span> <span class="title">dispense</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"No gumball dispensed"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type SoldState struct &#123;</span><br><span class="line">    gMachine *GumballMachine</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewSoldState</span><span class="params">(g *GumballMachine)</span> *<span class="title">SoldState</span> &#123;</span></span><br><span class="line">    r := new(SoldState)</span><br><span class="line">    r.gMachine = g</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldState)</span> <span class="title">insertQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Please wait, we're already giving you a gumball"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldState)</span> <span class="title">ejectQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Sorry, you already turned the crank"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldState)</span> <span class="title">turnCrank</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"Turning twice doesn't get you another gumball!"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *SoldState)</span> <span class="title">dispense</span><span class="params">()</span> &#123;</span></span><br><span class="line">    s.gMachine.releaseBall()</span><br><span class="line">    <span class="keyword">if</span> s.gMachine.getCount() &gt; <span class="number">0</span> &#123;</span><br><span class="line">        s.gMachine.setState(s.gMachine.getNoQuarterState())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">"Oops, out of gumballs!"</span>)</span><br><span class="line">        s.gMachine.setState(s.gMachine.getSoldOutState())</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/////////////////////////////////////////////////////////////////</span><br><span class="line"></span><br><span class="line">type GumballMachine struct &#123;</span><br><span class="line">    count           <span class="built_in">int</span></span><br><span class="line">    soldOutState    State</span><br><span class="line">    noQuarterState  State</span><br><span class="line">    hasQuarterState State</span><br><span class="line">    soldState       State</span><br><span class="line"></span><br><span class="line">    curState State</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewGumballMachine</span><span class="params">(n int)</span> *<span class="title">GumballMachine</span> &#123;</span></span><br><span class="line">    r := new(GumballMachine)</span><br><span class="line">    r.count = n</span><br><span class="line">    r.soldOutState = NewSoldOutState(r)</span><br><span class="line">    r.noQuarterState = NewNoQuarterState(r)</span><br><span class="line">    r.hasQuarterState = NewHasNoQuarterState(r)</span><br><span class="line">    r.soldState = NewSoldState(r)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">0</span> &#123;</span><br><span class="line">        r.curState = r.noQuarterState</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">InsertQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    s.curState.insertQuarter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">EjectQuarter</span><span class="params">()</span> &#123;</span></span><br><span class="line">    s.curState.ejectQuarter()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">TurnCrank</span><span class="params">()</span> &#123;</span></span><br><span class="line">    s.curState.turnCrank()</span><br><span class="line">    s.curState.dispense()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">setState</span><span class="params">(st State)</span> &#123;</span></span><br><span class="line">    s.curState = st</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">releaseBall</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"A gumball comes rolling out the slot..."</span>)</span><br><span class="line">    <span class="keyword">if</span> s.count &gt; <span class="number">0</span> &#123;</span><br><span class="line">        s.count--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">getCount</span><span class="params">()</span> <span class="title">int</span> &#123;</span></span><br><span class="line">    <span class="keyword">return</span> s.count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">getSoldOutState</span><span class="params">()</span> <span class="title">State</span> &#123;</span></span><br><span class="line">    <span class="keyword">return</span> s.soldOutState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">getNoQuarterState</span><span class="params">()</span> <span class="title">State</span> &#123;</span></span><br><span class="line">    <span class="keyword">return</span> s.noQuarterState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">getHasQuarterState</span><span class="params">()</span> <span class="title">State</span> &#123;</span></span><br><span class="line">    <span class="keyword">return</span> s.hasQuarterState</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *GumballMachine)</span> <span class="title">getSoldState</span><span class="params">()</span> <span class="title">State</span> &#123;</span></span><br><span class="line">    <span class="keyword">return</span> s.soldState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="代理模式">代理模式</h2><h3 id="代理模式：为另一个对象提供一个替身或占位符以访问这个对象。——《HEAD_FIRST_设计模式》">代理模式：为另一个对象提供一个替身或占位符以访问这个对象。——《HEAD FIRST 设计模式》</h3><p>golang代码：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">package proxy</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type <span class="type">GiveGift</span> interface &#123;</span><br><span class="line">    <span class="type">GiveDolls</span>()</span><br><span class="line">    <span class="type">GiveFlowers</span>()</span><br><span class="line">    <span class="type">GiveChocolate</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">SchoolGirl</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    name string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewSchoolGirl</span><span class="params">(n string)</span></span> *<span class="type">SchoolGirl</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">SchoolGirl</span>)</span><br><span class="line">    r.name = n</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *SchoolGirl)</span></span> <span class="type">GetName</span>() string &#123;</span><br><span class="line">    <span class="keyword">return</span> p.name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Proxy</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    gg *<span class="type">Pursuit</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewProxy</span><span class="params">(m *SchoolGirl)</span></span> *<span class="type">Proxy</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Proxy</span>)</span><br><span class="line">    r.gg = <span class="type">NewPursuit</span>(m)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Proxy)</span></span> <span class="type">GiveDolls</span>() &#123;</span><br><span class="line">    p.gg.<span class="type">GiveDolls</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Proxy)</span></span> <span class="type">GiveFlowers</span>() &#123;</span><br><span class="line">    p.gg.<span class="type">GiveFlowers</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Proxy)</span></span> <span class="type">GiveChocolate</span>() &#123;</span><br><span class="line">    p.gg.<span class="type">GiveChocolate</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type <span class="type">Pursuit</span> <span class="class"><span class="keyword">struct</span> </span>&#123;</span><br><span class="line">    mm *<span class="type">SchoolGirl</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">NewPursuit</span><span class="params">(m *SchoolGirl)</span></span> *<span class="type">Pursuit</span> &#123;</span><br><span class="line">    r := <span class="keyword">new</span>(<span class="type">Pursuit</span>)</span><br><span class="line">    r.mm = m</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Pursuit)</span></span> <span class="type">GiveDolls</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(p.mm.<span class="type">GetName</span>(), <span class="string">"送你洋娃娃"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Pursuit)</span></span> <span class="type">GiveFlowers</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(p.mm.<span class="type">GetName</span>(), <span class="string">"送你鲜花"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="params">(p *Pursuit)</span></span> <span class="type">GiveChocolate</span>() &#123;</span><br><span class="line">    fmt.<span class="type">Println</span>(p.mm.<span class="type">GetName</span>(), <span class="string">"送你巧克力"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/">Go</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Golang-编程百例" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/21/Golang-编程百例/" class="article-date">
  	<time datetime="2015-10-20T19:40:40.000Z" itemprop="datePublished">2015-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/21/Golang-编程百例/">Golang 编程百例</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="说明">说明</h1><p>本文初级篇内容依据《C语言经典算法100例》编写，提高篇内容依据《C语言趣味编程100例》编写，可以作为Go语言学习中的小测验。 </p>
<p>由于有些题目利用到C语言特性，针对这些题目只能尽可能的替换成Go语言写法。</p>
<h2 id="初级篇">初级篇</h2><h3 id="程序_01：数字排列组合">程序 01：数字排列组合</h3><p>题目：有 1、2、3、4 个数字，能组成多少个互不相同且无重复数字的三位数？都是多少？<br>1.程序分析：可填在百位、十位、个位的数字都是 1、2、3、4。组成所有的排列后再去<br>掉不满足条件的排列。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*以下为三重循环*/</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">5</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt; <span class="number">5</span>; j++ &#123;</span><br><span class="line">            <span class="keyword">for</span> k := <span class="number">1</span>; k &lt; <span class="number">5</span>; k++ &#123;</span><br><span class="line">                <span class="comment">/*确保 i 、j 、k 三位互不相同*/</span></span><br><span class="line">                <span class="keyword">if</span> i != k &amp;&amp; i != j &amp;&amp; j != k &#123;</span><br><span class="line">                    fmt.Println(i, j, k)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_02：阶梯利润分配">程序 02：阶梯利润分配</h3><p>题目：企业发放的奖金根据利润提成。利润(I)低于或等于10万元时，奖金可提成10%；利润高于10万元，低于20万元，低于10万元的部分按10%提成，高于10万元的部分，可提成7.5%；20万到40万之间时，高于20万元的部分，可提成5%；40万到60万之间时高于40万元的部分，可提成3%；60万到100万之间时，高于60万元的部分，可提成1.5%，高于100万元时，超过100万元的部分按1%提成，从键盘输入当月利润I，求应发放奖金总数？<br>1.程序分析：请利用数轴来分界，定位。注意定义时需把奖金定义成长整型。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var I float32 = <span class="number">0.0</span></span><br><span class="line">    var bonus float32 = <span class="number">0.0</span></span><br><span class="line">    fmt.Print(<span class="string">"输入利润："</span>)</span><br><span class="line">    fmt.Scanf(<span class="string">"%f\n"</span>, &amp;I)</span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> I &gt; <span class="number">1000000</span>:</span><br><span class="line">        bonus = (I - <span class="number">1000000</span>) * <span class="number">0.01</span></span><br><span class="line">        I = <span class="number">1000000</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> I &gt; <span class="number">600000</span>:</span><br><span class="line">        bonus += (I - <span class="number">600000</span>) * <span class="number">0.015</span></span><br><span class="line">        I = <span class="number">600000</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> I &gt; <span class="number">400000</span>:</span><br><span class="line">        bonus += (I - <span class="number">400000</span>) * <span class="number">0.03</span></span><br><span class="line">        I = <span class="number">400000</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> I &gt; <span class="number">200000</span>:</span><br><span class="line">        bonus += (I - <span class="number">200000</span>) * <span class="number">0.05</span></span><br><span class="line">        I = <span class="number">200000</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> I &gt; <span class="number">100000</span>:</span><br><span class="line">        bonus += (I - <span class="number">100000</span>) * <span class="number">0.075</span></span><br><span class="line">        I = <span class="number">100000</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        bonus += I * <span class="number">0.1</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"提成总计：%f\n"</span>, bonus)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_03：完全平方数">程序 03：完全平方数</h3><p>题目：一个整数，它加上 100 后是一个完全平方数，再加上 168 又是一个完全平方数，请问该数是多少？<br>1.程序分析：在10万以内判断，先将该数加上100后再开方，再将该数加上268后再开方，如果开方后的结果满足如下条件，即是结果。请看具体分析：<br>2.程序源代码：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="function">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i := 0</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        x := <span class="keyword">int</span>(math.Sqrt(float64(i + 100)))</span><br><span class="line">        y := <span class="keyword">int</span>(math.Sqrt(float64(i + 268)))</span><br><span class="line">        <span class="keyword">if</span> x*x == i+100 &amp;&amp; y*y == i+268 &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"这个数字是%d\n"</span>, i)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_04：这一年的第几天">程序 04：这一年的第几天</h3><p>题目：输入某年某月某日，判断这一天是这一年的第几天？<br>1.程序分析：以3月5日为例，应该先把前两个月的加起来，然后再加上5天即本年的第几天，特殊情况，闰年且输入月份大于3时需考虑多加一天。<br>2.程序源代码：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    "fmt"</span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    var y, m, d int = <span class="operator">0, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">days</span> <span class="built_in">int</span> = <span class="number">0</span></span><br><span class="line">    fmt.Scanf(<span class="string">"%d%d%d\n"</span>, &amp;y, &amp;<span class="keyword">m</span>, &amp;<span class="keyword">d</span>)</span><br><span class="line">    fmt.Printf(<span class="string">"%d年%d月%d日"</span>, y, <span class="keyword">m</span>, <span class="keyword">d</span>)</span><br><span class="line">    <span class="keyword">switch</span> <span class="keyword">m</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">30</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">30</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">30</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">30</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">28</span></span><br><span class="line">        <span class="keyword">if</span> (y%<span class="number">400</span> == <span class="number">0</span>) || (y%<span class="number">4</span> == <span class="number">0</span> &amp;&amp; y%<span class="number">100</span> != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">d</span> += <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">        <span class="keyword">d</span> = <span class="number">31</span></span><br><span class="line">        fallthrough</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">days</span> += <span class="keyword">d</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"是今年的第%d天!\n"</span>, <span class="keyword">days</span>)</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="程序_05：数字排序">程序 05：数字排序</h3><p>题目：输入三个整数 x,y,z，请把这三个数由小到大输出。<br>1.程序分析：我们想办法把最小的数放到 x 上，先将 x 与 y 进行比较，如果 x&gt;y 则将 x 与 y<br>的值进行交换，然后再用 x 与 z 进行比较，如果 x&gt;z 则将 x 与 z 的值进行交换，这样能使 x 最小。<br>2.程序源代码：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    var <span class="keyword">x</span>, <span class="keyword">y</span>, z <span class="keyword">int</span> = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    fmt.Scanf(<span class="string">"<span class="variable">%d</span><span class="variable">%d</span><span class="variable">%d</span>"</span>, &amp;<span class="keyword">x</span>, &amp;<span class="keyword">y</span>, &amp;z)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">x</span> &gt; <span class="keyword">y</span> &#123;</span><br><span class="line">        <span class="keyword">x</span>, <span class="keyword">y</span> = <span class="keyword">y</span>, <span class="keyword">x</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">x</span> &gt; z &#123;</span><br><span class="line">        <span class="keyword">x</span>, z = z, <span class="keyword">x</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">y</span> &gt; z &#123;</span><br><span class="line">        <span class="keyword">y</span>, z = z, <span class="keyword">y</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%d</span>&lt;<span class="variable">%d</span>&lt;<span class="variable">%d</span>\n"</span>, <span class="keyword">x</span>, <span class="keyword">y</span>, z)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_06：打印图形">程序 06：打印图形</h3><p>题目：用<em>号输出字母 C 的图案。<br>1.程序分析：可先用’</em>‘号在纸上写出字母 C，再分行输出。<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"*****\n"</span>)</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"**\n"</span>)</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"*\n"</span>)</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"**\n"</span>)</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"*****\n"</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_07：输出特殊图案">程序 07：输出特殊图案</h3><p>题目：输出特殊图案，请在 c 环境中运行，看一看，Very Beautiful!<br>1.程序分析：字符共有 256 个。不同字符，图形不一样。<br>2.程序源代码：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    var a, b = <span class="number">176</span>, <span class="number">219</span></span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span> \n"</span>, b, a, a, a, b)</span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span> \n"</span>, a, b, a, b, a)</span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span> \n"</span>, a, a, b, a, a)</span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span> \n"</span>, a, b, a, b, a)</span><br><span class="line">    fmt.Printf(<span class="string">"<span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span><span class="variable">%c</span> \n"</span>, b, a, a, a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_08：9*9_口诀">程序 08：9*9 口诀</h3><p>题目：输出 9*9 口诀。<br>1.程序分析：分行与列考虑，共 9 行 9 列，i 控制行，j 控制列。<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= i; j++ &#123;</span><br><span class="line">            fmt.Printf<span class="params">(<span class="string">"%d*%d=%-3d"</span>, j, i, i*j)</span> <span class="comment">/*-3d 表示左对齐，占 3 位*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"\n"</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_09：象棋棋盘">程序 09：象棋棋盘</h3><p>题目：要求输出国际象棋棋盘。<br>1.程序分析：用 i 控制行， j 来控制列，根据i+j的和的变化来控制输出黑方格，还是白方格。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">8</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">8</span>; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> (i+j)%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">                fmt.Printf(<span class="string">"■"</span>)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                fmt.Printf(<span class="string">"□"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">"\n"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_10：打印楼梯">程序 10：打印楼梯</h3><p>题目：打印楼梯，同时在楼梯上方打印笑脸。<br>1.程序分析：用 i 控制行，j 来控制列，j 根据 i 的变化来控制输出黑方格的个数。<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">8</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt;= i; j++ &#123;</span><br><span class="line">            fmt.Printf<span class="params">(<span class="string">"■■"</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"☺\n"</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_11：兔子问题">程序 11：兔子问题</h3><p>题目：古典问题：有一对兔子，从出生后第3个月起每个月都生一对兔子，小兔子长到第三个月后每个月又生一对兔子，假如兔子都不死，问每个月的兔子总数为多少？<br>1.程序分析： 兔子的规律为数列 1,1,2,3,5,8,13,21….<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var m1, m2 <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="number">12</span>; i++ &#123;</span><br><span class="line">        fmt.Println(m1, m2)</span><br><span class="line">        m1 += m2</span><br><span class="line">        m2 += m1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_12：求素数">程序 12：求素数</h3><p>题目：判断 101-200 之间有多少个素数，并输出所有素数。<br>1.程序分析：判断素数的方法：用一个数分别去除2到sqrt(这个数)，如果能被整除，则表明此数不是素数，反之是素数。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var i, j, k, count <span class="keyword">int</span> = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">101</span>; i &lt;= <span class="number">200</span>; i++ &#123;</span><br><span class="line">        k = <span class="keyword">int</span>(math.Sqrt(float64(i)))</span><br><span class="line">        <span class="keyword">for</span> j = <span class="number">2</span>; j &lt;= k; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> i%j == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> j == k+<span class="number">1</span> &#123;</span><br><span class="line">            fmt.Println(i)</span><br><span class="line">            count++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="string">"total"</span>, count)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_13：水仙花数">程序 13：水仙花数</h3><p>题目：打印出所有的“水仙花数”，所谓“水仙花数”是指一个三位数，其各位数字立方和等于该数本身。例如：153 是一个“水仙花数”，因为 153=1 的三次方＋5 的三次方＋3 的三次方。<br>1.程序分析：利用for循环控制100-999个数，每个数分解出个位，十位，百位。<br>2.程序源代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="literal">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">num</span> := <span class="number">100</span>; <span class="built_in">num</span> &lt; <span class="number">1000</span>; <span class="built_in">num</span>++ &#123;</span><br><span class="line">        i := <span class="built_in">num</span> / <span class="number">100</span></span><br><span class="line">        j := <span class="built_in">num</span> / <span class="number">10</span> % <span class="number">10</span></span><br><span class="line">        k := <span class="built_in">num</span> % <span class="number">10</span></span><br><span class="line">        <span class="keyword">if</span> i*i*i+j*j*j+k*k*k == <span class="built_in">num</span> &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"%d^3+%d^3+%d^3=%d\n"</span>, i, j, k, <span class="built_in">num</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_14：分解质因数">程序 14：分解质因数</h3><p>题目：将一个正整数分解质因数。例如：输入 90,打印出 90=2<em>3</em>3*5。<br>程序分析：对n进行分解质因数，应先找到一个最小的质数k，然后按下述步骤完成：<br>(1)如果这个质数恰等于n，则说明分解质因数的过程已经结束，打印出即可。<br>(2)如果n&lt;&gt;k，但n能被k整除，则应打印出k的值，并用n除以k的商,作为新的正整数n,重复执行第一步。<br>(3)如果n不能被k整除，则用k+1作为k的值, 重复执行第一步。<br>2.程序源代码：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">n</span>, i int = 0, 0</span><br><span class="line">    fmt.Printf(<span class="string">"please input a number:"</span>)</span><br><span class="line">    fmt.Scanf(<span class="string">"%d\n"</span>, &amp;<span class="keyword">n</span>)</span><br><span class="line">    fmt.Printf(<span class="string">"%d="</span>, <span class="keyword">n</span>)</span><br><span class="line">    <span class="keyword">for</span> i = 2; i &lt;= <span class="keyword">n</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="keyword">n</span> != i &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">n</span>%i == 0 &#123;</span><br><span class="line">                fmt.Printf(<span class="string">"%d*"</span>, i)</span><br><span class="line">                <span class="keyword">n</span> = <span class="keyword">n</span> / <span class="literal">i</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"%d\n"</span>, <span class="keyword">n</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_15：三元表达式">程序 15：三元表达式</h3><p>题目：利用条件运算符的嵌套来完成此题：学习成绩&gt;=90 分的同学用 A 表示，60-89 分之<br>间的用 B 表示，60分以下的用C表示。<br>1.程序分析：(a&gt;b)?a:b 这是条件运算符的基本例子。<br>2.程序源代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">type</span> B <span class="typename">bool</span></span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> score <span class="typename">int</span> = <span class="number">0</span></span><br><span class="line">    fmt.Scanf(<span class="string">"%d"</span>, &amp;score)</span><br><span class="line">    fmt.Println(B(score &gt;= <span class="number">90</span>).C(<span class="string">"A"</span>, B(score &gt;= <span class="number">60</span>).C(<span class="string">"B"</span>, <span class="string">"C"</span>)))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Go语言没有三元表达式,自写函数模仿。</span></span><br><span class="line"><span class="keyword">func</span> (b B) C(t, f <span class="keyword">interface</span>&#123;&#125;) <span class="keyword">interface</span>&#123;&#125; &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="typename">bool</span>(b) == <span class="constant">true</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_16：最大公约数和最小公倍数">程序 16：最大公约数和最小公倍数</h3><p>题目：输入两个正整数 m 和 n，求其最大公约数和最小公倍数。<br>1.程序分析：利用辗除法。<br>2.程序源代码：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">m</span>, <span class="keyword">n</span>, r, x int</span><br><span class="line">    fmt.Scanf(<span class="string">"%d%d"</span>, &amp;<span class="keyword">m</span>, &amp;<span class="keyword">n</span>)</span><br><span class="line">    x = <span class="keyword">m</span> * <span class="keyword">n</span></span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">n</span> != 0 &#123;</span><br><span class="line">        r = <span class="keyword">m</span> % <span class="keyword">n</span></span><br><span class="line">        <span class="keyword">m</span> = <span class="keyword">n</span></span><br><span class="line">        <span class="keyword">n</span> = <span class="literal">r</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"%d %d\n"</span>, <span class="keyword">m</span>, x/<span class="keyword">m</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_17：统计字符个数">程序 17：统计字符个数</h3><p>题目：输入一行字符，分别统计出其中英文字母、空格、数字和其它字符的个数。<br>1.程序分析：利用 while 语句, 条件为输入的字符不为’ \n’.<br>2.程序源代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"bufio"</span></span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> i, j, k, l <span class="typename">int</span> = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    reader := bufio.NewReader(os.Stdin)</span><br><span class="line">    input, _ := reader.ReadString(<span class="string">'\n'</span>)</span><br><span class="line">    <span class="keyword">for</span> _, <span class="typename">rune</span> := <span class="keyword">range</span> input &#123;</span><br><span class="line">        <span class="keyword">switch</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> (<span class="typename">rune</span> &gt;= <span class="string">'A'</span> &amp;&amp; <span class="typename">rune</span> &lt;= <span class="string">'Z'</span>):</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> (<span class="typename">rune</span> &gt;= <span class="string">'a'</span> &amp;&amp; <span class="typename">rune</span> &lt;= <span class="string">'z'</span>):</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="typename">rune</span> == <span class="string">' '</span> || <span class="typename">rune</span> == <span class="string">'\t'</span>:</span><br><span class="line">            j++</span><br><span class="line">        <span class="keyword">case</span> (<span class="typename">rune</span> &gt;= <span class="string">'0'</span> &amp;&amp; <span class="typename">rune</span> &lt;= <span class="string">'9'</span>):</span><br><span class="line">            k++</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            l++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"all in all:char=%d space=%d digit=%d others=%d\n"</span>, i, j, k, l)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_18：累加特殊数">程序 18：累加特殊数</h3><p>题目：求 s=a+aa+aaa+aaaa+aa…a 的值，其中 a 是一个数字。例如 2+22+222+2222+22222(此<br>时共有5个数相加)，几个数相加有键盘控制。<br>1.程序分析：关键是计算出每一项的值。<br>2.程序源代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> a, n, <span class="built_in">count</span> int</span><br><span class="line">    <span class="keyword">var</span> sn, tn int</span><br><span class="line">    fmt.<span class="type">Printf</span>(<span class="string">"please input a and n "</span>)</span><br><span class="line">    fmt.<span class="type">Scanf</span>(<span class="string">"%d%d\n"</span>, &amp;a, &amp;n)</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">count</span> &lt; n &#123;</span><br><span class="line">        tn = tn + a</span><br><span class="line">        sn = sn + tn</span><br><span class="line">        a = a * <span class="number">10</span></span><br><span class="line">        <span class="built_in">count</span>++</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.<span class="type">Printf</span>(<span class="string">"a+aa+...=%d\n"</span>, sn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_19：因子之和">程序 19：因子之和</h3><p>题目：一个数如果恰好等于它的因子之和，这个数就称为“完数”。例如 6=1＋2＋3.编程找出 1000 以内的所有完数。 </p>
<ol>
<li>程序分析：请参照程序&lt;–上页程序 14.<br>2.程序源代码：</li>
</ol>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">n</span> := 2; <span class="keyword">n</span> &lt; 1000; <span class="keyword">n</span>++ &#123;</span><br><span class="line">        <span class="keyword">m</span> := <span class="keyword">n</span></span><br><span class="line">        <span class="keyword">for</span> i := 1; i &lt; <span class="keyword">n</span>; i++ &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">n</span>%i == 0 &#123;</span><br><span class="line">                <span class="keyword">m</span> -= <span class="literal">i</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">m</span> == 0 &#123;</span><br><span class="line">            fmt.Println(<span class="keyword">n</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_20：自由落体">程序 20：自由落体</h3><p>题目：一球从100米高度自由落下，每次落地后反跳回原高度的一半；再落下，求它在第10次落地时，共经过多少米？第10次反弹多高？<br>1.程序分析：见下面注释<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    s := <span class="number">100.0</span></span><br><span class="line">    h := s / <span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">2</span>; i &lt;= <span class="number">10</span>; i++ &#123;</span><br><span class="line">        s += <span class="number">2</span> * h</span><br><span class="line">        h /= <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"the total of road is %f\n"</span>, s)</span><br><span class="line">    fmt.Printf(<span class="string">"the tenth is %f meter\n"</span>, h)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_21：猴子吃桃">程序 21：猴子吃桃</h3><p>题目：猴子吃桃问题：猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个。第二天早上又将剩下的桃子吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第 10 天早上想再吃时，见只剩下一个桃子了。求第一天共摘了多少。<br>1.程序分析：采取逆向思维的方法，从后往前推断。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var x1, x2, day <span class="keyword">int</span> = <span class="number">0</span>, <span class="number">1</span>, <span class="number">9</span></span><br><span class="line">    <span class="keyword">for</span> day &gt; <span class="number">0</span> &#123;</span><br><span class="line">        x1 = (x2 + <span class="number">1</span>) * <span class="number">2</span></span><br><span class="line">        x2 = x1</span><br><span class="line">        day--</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"the total is %d\n"</span>, x1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_22：找出对手">程序 22：找出对手</h3><p>题目：两个乒乓球队进行比赛，各出三人。甲队为a,b,c三人，乙队为x,y,z三人。已抽签决定比赛名单。有人向队员打听比赛的名单。a说他不和x比，c说他不和x,z比，请编程序找出三队赛手的名单。<br>1.程序分析：判断素数的方法：用一个数分别去除2到sqrt(这个数)，如果能被整除，则表明此数不是素数，反之是素数。<br>2.程序源代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">func</span> main() &#123;</span><br><span class="line">    <span class="keyword">var</span> i, j, k <span class="typename">int16</span> <span class="comment">/*i 是 a 的对手，j 是 b 的对手，k 是 c 的对手*/</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="string">'x'</span>; i &lt;= <span class="string">'z'</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j = <span class="string">'x'</span>; j &lt;= <span class="string">'z'</span>; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> i != j &#123;</span><br><span class="line">                <span class="keyword">for</span> k = <span class="string">'x'</span>; k &lt;= <span class="string">'z'</span>; k++ &#123;</span><br><span class="line">                    <span class="keyword">if</span> i != k &amp;&amp; j != k &#123;</span><br><span class="line">                        <span class="keyword">if</span> i != <span class="string">'x'</span> &amp;&amp; k != <span class="string">'x'</span> &amp;&amp; k != <span class="string">'z'</span> &#123;</span><br><span class="line">                            fmt.Printf(<span class="string">"order is a--%c b--%c c--%c\n"</span>, i, j, k)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_23：打印菱形">程序 23：打印菱形</h3><p>题目：打印出如下图案（菱形）</p>
<p>   *</p>
<hr>
<hr>
<hr>
<hr>
<hr>
<p>   *<br>1.程序分析：先把图形分成两部分来看待，前四行一个规律，后三行一个规律，利用双重for循环，第一层控制行，第二层控制列。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var i, j, k <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0</span>; i &lt;= <span class="number">3</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j = <span class="number">0</span>; j &lt;= <span class="number">2</span>-i; j++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">" "</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> k = <span class="number">0</span>; k &lt;= <span class="number">2</span>*i; k++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"*"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">"\n"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0</span>; i &lt;= <span class="number">2</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j = <span class="number">0</span>; j &lt;= i; j++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">" "</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> k = <span class="number">0</span>; k &lt;= <span class="number">4</span>-<span class="number">2</span>*i; k++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"*"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        fmt.Printf(<span class="string">"\n"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_24：分数序列">程序 24：分数序列</h3><p>题目：有一分数序列：2/1，3/2，5/3，8/5，13/8，21/13…求出这个数列的前 20 项之和。<br>1.程序分析：请抓住分子与分母的变化规律。<br>2.程序源代码：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    <span class="built_in">number</span> := <span class="number">20</span></span><br><span class="line">    <span class="operator">a</span>, b, s := <span class="number">2.0</span>, <span class="number">1.0</span>, <span class="number">0.0</span></span><br><span class="line">    <span class="keyword">for</span> n := <span class="number">1</span>; n &lt;= <span class="built_in">number</span>; n++ &#123;</span><br><span class="line">        s = s + <span class="operator">a</span>/b</span><br><span class="line">        <span class="operator">a</span>, b = <span class="operator">a</span>+b, <span class="operator">a</span> </span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"sum is %9.6f\n"</span>, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_25：求阶层和">程序 25：求阶层和</h3><p>题目：求 1+2!+3!+…+20!的和<br>1.程序分析：此程序只是把累加变成了累乘。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    s, t := <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> n := <span class="number">1</span>; n &lt;= <span class="number">20</span>; n++ &#123;</span><br><span class="line">        t *= n</span><br><span class="line">        s += t</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"1+2!+3!...+20!=%d\n"</span>, s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_26：递归求阶层">程序 26：递归求阶层</h3><p>题目：利用递归方法求 5!。<br>1.程序分析：递归公式：fn=fn_1*4!<br>2.程序源代码：</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line">func main() &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"%d!=%d\n"</span>, 5, <span class="keyword">fact</span>(5))</span><br><span class="line">&#125;</span><br><span class="line">func <span class="keyword">fact</span>(<span class="keyword">n</span> int) (<span class="keyword">sum</span> int) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">n</span> == 0 &#123;</span><br><span class="line">        <span class="keyword">return</span> 1</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">sum</span> = <span class="keyword">n</span> * <span class="keyword">fact</span>(<span class="keyword">n</span>-1)</span><br><span class="line">    <span class="literal">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_27：反序输出字符">程序 27：反序输出字符</h3><p>题目：利用递归函数调用方式，将所输入的 5 个字符，以相反顺序打印出来。<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    putchar(<span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">putchar</span><span class="params">(n int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">c</span> byte</span><br><span class="line">    <span class="keyword">if</span> n &gt;= <span class="number">1</span> &#123;</span><br><span class="line">        fmt.<span class="type">Scanf</span>(<span class="string">"%c"</span>, &amp;<span class="built_in">c</span>)</span><br><span class="line">        putchar(n - <span class="number">1</span>)</span><br><span class="line">        fmt.<span class="type">Printf</span>(<span class="string">"%c"</span>, <span class="built_in">c</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_28：推出年龄">程序 28：推出年龄</h3><p>题目：有5个人坐在一起，问第五个人多少岁？他说比第4个人大2岁。问第4个人岁数，他说比第3个人大2岁。问第三个人，又说比第2人大两岁。问第2个人，说比第一个人大两岁。最后问第一个人，他说是10岁。请问第五个人多大？<br>1.程序分析：利用递归的方法，递归分为回推和递推两个阶段。要想知道第五个人岁数，需知道第四人的岁数，依次类推，推到第一人（10 岁），再往回推。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    fmt.Printf(<span class="string">"%d\n"</span>, clacAge(<span class="number">5</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">func <span class="title">clacAge</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="params">(age <span class="keyword">int</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> &#123;</span><br><span class="line">        age = <span class="number">10</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        age = clacAge(n-<span class="number">1</span>) + <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_29：计算数字">程序 29：计算数字</h3><p>题目：给一个不多于5位的正整数，要求：一、求它是几位数，二、逆序打印出各位数字。<br>1.程序分析：学会分解出每一位数<br>2.程序源代码：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="function">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var x <span class="keyword">int</span></span><br><span class="line">    fmt.Printf(<span class="string">"请输入一个数字:"</span>)</span><br><span class="line">    fmt.Scanf(<span class="string">"%d\n"</span>, &amp;x)</span><br><span class="line">    <span class="keyword">for</span> i := 5; i &gt; <span class="number">0</span>; i-- &#123;</span><br><span class="line">        r := x / <span class="keyword">int</span>(math.Pow10(i-1))</span><br><span class="line">        <span class="keyword">if</span> r &gt; 0 &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"%d是一个%d位数字.\n"</span>, x, i)</span><br><span class="line">            out(i, x)</span><br><span class="line">            fmt.Printf(<span class="string">"\n"</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">func <span class="title">out</span><span class="params">(n, x <span class="keyword">int</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">1</span> &#123;</span><br><span class="line">        out(n-<span class="number">1</span>, x)</span><br><span class="line">    &#125;</span><br><span class="line">    r := x % <span class="keyword">int</span>(math.Pow10(n)) / <span class="keyword">int</span>(math.Pow10(n-1))</span><br><span class="line">    fmt.Printf(<span class="string">"%d"</span>, r)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_30：找出回文数">程序 30：找出回文数</h3><p>题目：一个5位数，判断它是不是回文数。即12321是回文数，个位与万位相同，十位与千位相同。<br>1.程序分析：同 29 例<br>2.程序源代码：</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"><span class="function">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var x, i <span class="keyword">int</span></span><br><span class="line">    var max <span class="keyword">int</span> = <span class="number">5</span></span><br><span class="line">    fmt.Printf(<span class="string">"请输入一个数字:"</span>)</span><br><span class="line">    fmt.Scanf(<span class="string">"%d\n"</span>, &amp;x)</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">0</span>; i &lt; max/<span class="number">2</span>; i++ &#123;</span><br><span class="line">        h := x % <span class="keyword">int</span>(math.Pow10(max-i)) / <span class="keyword">int</span>(math.Pow10(max-i-1))</span><br><span class="line">        l := x % <span class="keyword">int</span>(math.Pow10(i+1)) / <span class="keyword">int</span>(math.Pow10(i))</span><br><span class="line">        <span class="keyword">if</span> h != l &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"%d不是一个回文数.\n"</span>, x)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> i == max/<span class="number">2</span> &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"%d是一个回文数.\n"</span>, x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_31：检索字符串">程序 31：检索字符串</h3><p>题目：请输入星期几的第一个字母来判断一下是星期几，如果第一个字母一样，则继续判断第二个字母。<br>1.程序分析：用情况语句比较好，如果第一个字母一样，则判断用情况语句或 if 语句判断第<br>二个字母。<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"strings"</span></span><br><span class="line">)</span></span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    inweek := []string&#123;<span class="string">"Monday"</span>, <span class="string">"Tuesday"</span>, <span class="string">"Wednesday"</span>, <span class="string">"Thurday"</span>, <span class="string">"Friday"</span>, <span class="string">"Saturday"</span>, <span class="string">"Sunday"</span>&#125;</span><br><span class="line">    instr := <span class="string">""</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"input a char:"</span>)</span></span><br><span class="line">    fmt.Scanf<span class="params">(<span class="string">"%s\n"</span>, &amp;instr)</span></span><br><span class="line">    outweek<span class="params">(instr, inweek)</span></span><br><span class="line">&#125;</span><br><span class="line">func outweek<span class="params">(instr string, inweek []string)</span> &#123;</span><br><span class="line">    nextstr := <span class="string">""</span></span><br><span class="line">    nextweek := make<span class="params">([]string, <span class="number">0</span>)</span></span><br><span class="line">    <span class="keyword">for</span> _, value := range inweek &#123;</span><br><span class="line">        index := strings.Index<span class="params">(value, instr)</span></span><br><span class="line">        <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">            nextweek = append<span class="params">(nextweek, value)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"%s\n"</span>, nextweek[<span class="number">0</span>:])</span></span><br><span class="line">    <span class="keyword">if</span> len<span class="params">(nextweek)</span> &gt; <span class="number">1</span> &#123;</span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"input next char:"</span>)</span></span><br><span class="line">        fmt.Scanf<span class="params">(<span class="string">"%s\n"</span>, &amp;nextstr)</span></span><br><span class="line">        nextstr = instr + nextstr</span><br><span class="line">        outweek<span class="params">(nextstr, nextweek)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_32：改变控制台颜色">程序 32：改变控制台颜色</h3><p>题目：Press any key to change color, do you want to try it. Please hurry up!<br>1.程序分析： 使用Win API GetStdHandle和SetConsoleTextAttribute<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"syscall"</span></span><br><span class="line">)</span></span><br><span class="line">type <span class="params">(</span><br><span class="line">    HANDLE uintptr</span><br><span class="line">    WORD   uint16</span><br><span class="line">    DWORD  uint32</span><br><span class="line">)</span></span><br><span class="line">const <span class="params">(</span><br><span class="line">    STD_OUTPUT_HANDLE    = <span class="number">0</span>xFFFFFFF5</span><br><span class="line">    FOREGROUND_BLUE      = <span class="number">0</span>x01</span><br><span class="line">    FOREGROUND_GREEN     = <span class="number">0</span>x02</span><br><span class="line">    FOREGROUND_RED       = <span class="number">0</span>x04</span><br><span class="line">    FOREGROUND_INTENSITY = <span class="number">0</span>x08</span><br><span class="line">    BACKGROUND_BLUE      = <span class="number">0</span>x10</span><br><span class="line">    BACKGROUND_GREEN     = <span class="number">0</span>x20</span><br><span class="line">    BACKGROUND_RED       = <span class="number">0</span>x40</span><br><span class="line">    BACKGROUND_INTENSITY = <span class="number">0</span>x80</span><br><span class="line">)</span></span><br><span class="line">var <span class="params">(</span><br><span class="line">    modkernel32                 = syscall.NewLazyDLL<span class="params">(<span class="string">"kernel32.dll"</span>)</span></span><br><span class="line">    procGetStdHandle            = modkernel32.NewProc<span class="params">(<span class="string">"GetStdHandle"</span>)</span></span><br><span class="line">    procSetConsoleTextAttribute = modkernel32.NewProc<span class="params">(<span class="string">"SetConsoleTextAttribute"</span>)</span></span><br><span class="line">)</span></span><br><span class="line">func GetStdHandle<span class="params">(nStdHandle DWORD)</span> HANDLE &#123;</span><br><span class="line">    ret, _, _ := procGetStdHandle.Call<span class="params">(uintptr<span class="params">(nStdHandle)</span>)</span></span><br><span class="line">    return HANDLE<span class="params">(ret)</span></span><br><span class="line">&#125;</span><br><span class="line">func SetConsoleTextAttribute<span class="params">(hConsoleOutput HANDLE, wAttributes WORD)</span> bool &#123;</span><br><span class="line">    ret, _, _ := procSetConsoleTextAttribute.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(wAttributes)</span>)</span></span><br><span class="line">    return ret <span class="built_in">!</span>= <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">color</span> := <span class="number">0</span>; <span class="built_in">color</span> &lt; <span class="number">8</span>; <span class="built_in">color</span>++ &#123;</span><br><span class="line">        textbackground<span class="params">(color)</span></span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"This is color %d\n"</span>, color)</span></span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"Press any key to continue\n"</span>)</span></span><br><span class="line">        fmt.Scanln<span class="params">()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">func textbackground<span class="params">(color int)</span> &#123;</span><br><span class="line">    hOut := GetStdHandle<span class="params">(STD_OUTPUT_HANDLE)</span></span><br><span class="line">    SetConsoleTextAttribute<span class="params">(hOut, WORD<span class="params">(color)</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_33：gotoxy()与_clrscr()函数">程序 33：gotoxy()与 clrscr()函数</h3><p>题目：学习 gotoxy()与 clrscr()函数<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"syscall"</span></span><br><span class="line">    <span class="string">"unsafe"</span></span><br><span class="line">)</span></span><br><span class="line">type <span class="params">(</span><br><span class="line">    HANDLE uintptr</span><br><span class="line">    WORD   uint16</span><br><span class="line">    DWORD  uint32</span><br><span class="line">    TCHAR  rune</span><br><span class="line">)</span></span><br><span class="line">const <span class="params">(</span><br><span class="line">    STD_OUTPUT_HANDLE    = <span class="number">0</span>xFFFFFFF5</span><br><span class="line">    FOREGROUND_BLUE      = <span class="number">0</span>x01</span><br><span class="line">    FOREGROUND_GREEN     = <span class="number">0</span>x02</span><br><span class="line">    FOREGROUND_RED       = <span class="number">0</span>x04</span><br><span class="line">    FOREGROUND_INTENSITY = <span class="number">0</span>x08</span><br><span class="line">    BACKGROUND_BLUE      = <span class="number">0</span>x10</span><br><span class="line">    BACKGROUND_GREEN     = <span class="number">0</span>x20</span><br><span class="line">    BACKGROUND_RED       = <span class="number">0</span>x40</span><br><span class="line">    BACKGROUND_INTENSITY = <span class="number">0</span>x80</span><br><span class="line">)</span></span><br><span class="line">type COORD struct &#123;</span><br><span class="line">    X, Y int16</span><br><span class="line">&#125;</span><br><span class="line">type SMALL_RECT struct &#123;</span><br><span class="line">    Left, Top, Right, Bottom int16</span><br><span class="line">&#125;</span><br><span class="line">type CONSOLE_SCREEN_BUFFER_INFO struct &#123;</span><br><span class="line">    DwSize              COORD</span><br><span class="line">    DwCursorPosition    COORD</span><br><span class="line">    WAttributes         WORD</span><br><span class="line">    SrWindow            SMALL_RECT</span><br><span class="line">    DwMaximumWindowSize COORD</span><br><span class="line">&#125;</span><br><span class="line">var <span class="params">(</span><br><span class="line">    modkernel32                    = syscall.NewLazyDLL<span class="params">(<span class="string">"kernel32.dll"</span>)</span></span><br><span class="line">    procFillConsoleOutputAttribute = modkernel32.NewProc<span class="params">(<span class="string">"FillConsoleOutputAttribute"</span>)</span></span><br><span class="line">    procFillConsoleOutputCharacter = modkernel32.NewProc<span class="params">(<span class="string">"FillConsoleOutputCharacterW"</span>)</span></span><br><span class="line">    procGetStdHandle               = modkernel32.NewProc<span class="params">(<span class="string">"GetStdHandle"</span>)</span></span><br><span class="line">    procGetConsoleScreenBufferInfo = modkernel32.NewProc<span class="params">(<span class="string">"GetConsoleScreenBufferInfo"</span>)</span></span><br><span class="line">    procSetConsoleCursorPosition   = modkernel32.NewProc<span class="params">(<span class="string">"SetConsoleCursorPosition"</span>)</span></span><br><span class="line">    procSetConsoleTextAttribute    = modkernel32.NewProc<span class="params">(<span class="string">"SetConsoleTextAttribute"</span>)</span></span><br><span class="line">)</span></span><br><span class="line">func COORD2DWORD<span class="params">(c COORD)</span> DWORD &#123;</span><br><span class="line">    return DWORD<span class="params">(int32<span class="params">(c.Y)</span>&lt;&lt;<span class="number">16</span> + int32<span class="params">(c.X)</span>)</span></span><br><span class="line">&#125;</span><br><span class="line">func FillConsoleOutputAttribute<span class="params">(hConsoleOutput HANDLE, wAttribute WORD, nLength DWORD, dwWriteCoord COORD)</span> <span class="built_in">*</span>DWORD &#123;</span><br><span class="line">    var lpNumberOfAttrsWritten DWORD</span><br><span class="line">    ret, _, _ := procFillConsoleOutputAttribute.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(wAttribute)</span>,</span><br><span class="line">        uintptr<span class="params">(nLength)</span>,</span><br><span class="line">        uintptr<span class="params">(COORD2DWORD<span class="params">(dwWriteCoord)</span>)</span>,</span><br><span class="line">        uintptr<span class="params">(unsafe.Pointer<span class="params">(&amp;lpNumberOfAttrsWritten)</span>)</span>)</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="number">0</span> &#123;</span><br><span class="line">        return nil</span><br><span class="line">    &#125;</span><br><span class="line">    return &amp;lpNumberOfAttrsWritten</span><br><span class="line">&#125;</span><br><span class="line">func FillConsoleOutputCharacter<span class="params">(hConsoleOutput HANDLE, cCharacter TCHAR, nLength DWORD, dwWriteCoord COORD)</span> <span class="built_in">*</span>DWORD &#123;</span><br><span class="line">    var lpNumberOfAttrsWritten DWORD</span><br><span class="line">    ret, _, _ := procFillConsoleOutputCharacter.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(cCharacter)</span>,</span><br><span class="line">        uintptr<span class="params">(nLength)</span>,</span><br><span class="line">        uintptr<span class="params">(COORD2DWORD<span class="params">(dwWriteCoord)</span>)</span>,</span><br><span class="line">        uintptr<span class="params">(unsafe.Pointer<span class="params">(&amp;lpNumberOfAttrsWritten)</span>)</span>)</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="number">0</span> &#123;</span><br><span class="line">        return nil</span><br><span class="line">    &#125;</span><br><span class="line">    return &amp;lpNumberOfAttrsWritten</span><br><span class="line">&#125;</span><br><span class="line">func GetStdHandle<span class="params">(nStdHandle DWORD)</span> HANDLE &#123;</span><br><span class="line">    ret, _, _ := procGetStdHandle.Call<span class="params">(uintptr<span class="params">(nStdHandle)</span>)</span></span><br><span class="line">    return HANDLE<span class="params">(ret)</span></span><br><span class="line">&#125;</span><br><span class="line">func GetConsoleScreenBufferInfo<span class="params">(hConsoleOutput HANDLE)</span> <span class="built_in">*</span>CONSOLE_SCREEN_BUFFER_INFO &#123;</span><br><span class="line">    var csbi CONSOLE_SCREEN_BUFFER_INFO</span><br><span class="line">    ret, _, _ := procGetConsoleScreenBufferInfo.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(unsafe.Pointer<span class="params">(&amp;csbi)</span>)</span>)</span></span><br><span class="line">    <span class="keyword">if</span> ret == <span class="number">0</span> &#123;</span><br><span class="line">        return nil</span><br><span class="line">    &#125;</span><br><span class="line">    return &amp;csbi</span><br><span class="line">&#125;</span><br><span class="line">func SetConsoleCursorPosition<span class="params">(hConsoleOutput HANDLE, dwCursorPosition COORD)</span> bool &#123;</span><br><span class="line">    ret, _, _ := procSetConsoleCursorPosition.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(COORD2DWORD<span class="params">(dwCursorPosition)</span>)</span>)</span></span><br><span class="line">    return ret <span class="built_in">!</span>= <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">func SetConsoleTextAttribute<span class="params">(hConsoleOutput HANDLE, wAttributes WORD)</span> bool &#123;</span><br><span class="line">    ret, _, _ := procSetConsoleTextAttribute.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(wAttributes)</span>)</span></span><br><span class="line">    return ret <span class="built_in">!</span>= <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">func clrscr<span class="params">()</span> &#123;</span><br><span class="line">    hConsole := GetStdHandle<span class="params">(STD_OUTPUT_HANDLE)</span></span><br><span class="line">    coordScreen := COORD&#123;<span class="number">0</span>, <span class="number">0</span>&#125;</span><br><span class="line">    var dwConSize DWORD</span><br><span class="line">    var csbi <span class="built_in">*</span>CONSOLE_SCREEN_BUFFER_INFO</span><br><span class="line">    csbi = GetConsoleScreenBufferInfo<span class="params">(hConsole)</span></span><br><span class="line">    dwConSize = DWORD<span class="params">(csbi.DwSize.X * csbi.DwSize.Y)</span></span><br><span class="line">    FillConsoleOutputCharacter<span class="params">(hConsole, TCHAR<span class="params">(' ')</span>, dwConSize, coordScreen)</span></span><br><span class="line">    csbi = GetConsoleScreenBufferInfo<span class="params">(hConsole)</span></span><br><span class="line">    FillConsoleOutputAttribute<span class="params">(hConsole, csbi.WAttributes, dwConSize, coordScreen)</span></span><br><span class="line">    SetConsoleCursorPosition<span class="params">(hConsole, coordScreen)</span></span><br><span class="line">&#125;</span><br><span class="line">func gotoxy<span class="params">(x, y int16)</span> &#123;</span><br><span class="line">    loc := COORD&#123;x, y&#125;</span><br><span class="line">    hConsole := GetStdHandle<span class="params">(STD_OUTPUT_HANDLE)</span></span><br><span class="line">    SetConsoleCursorPosition<span class="params">(hConsole, loc)</span></span><br><span class="line">&#125;</span><br><span class="line">func textbackground<span class="params">(color int)</span> &#123;</span><br><span class="line">    hOut := GetStdHandle<span class="params">(STD_OUTPUT_HANDLE)</span></span><br><span class="line">    SetConsoleTextAttribute<span class="params">(hOut, WORD<span class="params">(color)</span>)</span></span><br><span class="line">&#125;</span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    clrscr<span class="params">()</span> <span class="comment">/*清屏函数*/</span></span><br><span class="line">    textbackground<span class="params">(<span class="number">2</span>)</span></span><br><span class="line">    gotoxy<span class="params">(<span class="number">1</span>, <span class="number">5</span>)</span> <span class="comment">/*定位函数*/</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"Output at row 5 column 1\n"</span>)</span></span><br><span class="line">    textbackground<span class="params">(<span class="number">3</span>)</span></span><br><span class="line">    gotoxy<span class="params">(<span class="number">20</span>, <span class="number">10</span>)</span></span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"Output at row 10 column 20\n"</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_34：函数调用">程序 34：函数调用</h3><p>题目：练习函数调用 </p>
<ol>
<li>程序分析：<br>2.程序源代码：</li>
</ol>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line">import (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span> &#123;</span></span><br><span class="line">    noresult()</span><br><span class="line">    ret := oneresult()</span><br><span class="line">    fmt.Println(<span class="string">"存在1个返回值的函数"</span>, ret)</span><br><span class="line">    _, b := tworesult()</span><br><span class="line">    fmt.Println(<span class="string">"存在2个返回值的函数"</span>, b)</span><br><span class="line">    _, _, _ = threeresult()</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">noresult</span><span class="params">()</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"没有返回值的函数"</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">oneresult</span><span class="params">()</span> <span class="title">int</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"存在1个返回值的函数"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">tworesult</span><span class="params">()</span> <span class="params">(int, bool)</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"存在2个返回值的函数"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span>, <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">threeresult</span><span class="params">()</span> <span class="params">(int, bool, string)</span> &#123;</span></span><br><span class="line">    fmt.Println(<span class="string">"存在3个返回值的函数"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>, <span class="literal">false</span>, <span class="string">"错误"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_35：文本颜色设置">程序 35：文本颜色设置</h3><p>题目：文本颜色设置<br>1.程序分析：使用Win API GetStdHandle和SetConsoleTextAttribute<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    <span class="string">"syscall"</span></span><br><span class="line">)</span></span><br><span class="line">type <span class="params">(</span><br><span class="line">    HANDLE uintptr</span><br><span class="line">    WORD   uint16</span><br><span class="line">    DWORD  uint32</span><br><span class="line">)</span></span><br><span class="line">const <span class="params">(</span><br><span class="line">    STD_OUTPUT_HANDLE    = <span class="number">0</span>xFFFFFFF5</span><br><span class="line">    FOREGROUND_BLUE      = <span class="number">0</span>x01</span><br><span class="line">    FOREGROUND_GREEN     = <span class="number">0</span>x02</span><br><span class="line">    FOREGROUND_RED       = <span class="number">0</span>x04</span><br><span class="line">    FOREGROUND_INTENSITY = <span class="number">0</span>x08</span><br><span class="line">    BACKGROUND_BLUE      = <span class="number">0</span>x10</span><br><span class="line">    BACKGROUND_GREEN     = <span class="number">0</span>x20</span><br><span class="line">    BACKGROUND_RED       = <span class="number">0</span>x40</span><br><span class="line">    BACKGROUND_INTENSITY = <span class="number">0</span>x80</span><br><span class="line">)</span></span><br><span class="line">var <span class="params">(</span><br><span class="line">    modkernel32                 = syscall.NewLazyDLL<span class="params">(<span class="string">"kernel32.dll"</span>)</span></span><br><span class="line">    procGetStdHandle            = modkernel32.NewProc<span class="params">(<span class="string">"GetStdHandle"</span>)</span></span><br><span class="line">    procSetConsoleTextAttribute = modkernel32.NewProc<span class="params">(<span class="string">"SetConsoleTextAttribute"</span>)</span></span><br><span class="line">)</span></span><br><span class="line">func GetStdHandle<span class="params">(nStdHandle DWORD)</span> HANDLE &#123;</span><br><span class="line">    ret, _, _ := procGetStdHandle.Call<span class="params">(uintptr<span class="params">(nStdHandle)</span>)</span></span><br><span class="line">    return HANDLE<span class="params">(ret)</span></span><br><span class="line">&#125;</span><br><span class="line">func SetConsoleTextAttribute<span class="params">(hConsoleOutput HANDLE, wAttributes WORD)</span> bool &#123;</span><br><span class="line">    ret, _, _ := procSetConsoleTextAttribute.Call<span class="params">(</span><br><span class="line">        uintptr<span class="params">(hConsoleOutput)</span>,</span><br><span class="line">        uintptr<span class="params">(wAttributes)</span>)</span></span><br><span class="line">    return ret <span class="built_in">!</span>= <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">color</span> := <span class="number">1</span>; <span class="built_in">color</span> &lt; <span class="number">16</span>; <span class="built_in">color</span>++ &#123;</span><br><span class="line">        textcolor<span class="params">(color)</span> <span class="comment">/*设置文本颜色*/</span></span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"This is color %d\n"</span>, color)</span></span><br><span class="line">        textcolor<span class="params">(<span class="number">128</span> + color)</span></span><br><span class="line">        fmt.Printf<span class="params">(<span class="string">"This is blinking\n"</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">func textcolor<span class="params">(color int)</span> &#123;</span><br><span class="line">    hOut := GetStdHandle<span class="params">(STD_OUTPUT_HANDLE)</span></span><br><span class="line">    SetConsoleTextAttribute<span class="params">(hOut, WORD<span class="params">(color)</span>)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_36：求素数">程序 36：求素数</h3><p>题目：求 100 之内的素数<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">3</span>; i &lt; <span class="number">100</span>; i++ &#123;</span><br><span class="line">        var j = <span class="number">2</span></span><br><span class="line">        <span class="keyword">for</span> j = <span class="number">2</span>; j &lt; i; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> i%j == <span class="number">0</span> &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> i == j &#123;</span><br><span class="line">            fmt.Print(i, <span class="string">" "</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_37：求最大数">程序 37：求最大数</h3><p>题目：对 10 个数进行排序<br>1.程序分析：可以利用选择法，即从后9个比较过程中，选择一个最小的与第一个元素交换，下次类推，即用第二个元素与后 8 个进行比较，并进行交换。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var <span class="built_in">array</span> [<span class="number">10</span>]<span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"array[%d]="</span>, i)</span><br><span class="line">        fmt.Scanf(<span class="string">"%d\n"</span>, &amp;<span class="built_in">array</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println()</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">9</span>; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := i + <span class="number">1</span>; j &lt; <span class="number">9</span>; j++ &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">array</span>[j] &gt; <span class="built_in">array</span>[j+<span class="number">1</span>] &#123;</span><br><span class="line">                <span class="built_in">array</span>[j], <span class="built_in">array</span>[j+<span class="number">1</span>] = <span class="built_in">array</span>[j+<span class="number">1</span>], <span class="built_in">array</span>[j]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">array</span>[i] &gt; <span class="built_in">array</span>[i+<span class="number">1</span>] &#123;</span><br><span class="line">            <span class="built_in">array</span>[i], <span class="built_in">array</span>[i+<span class="number">1</span>] = <span class="built_in">array</span>[i+<span class="number">1</span>], <span class="built_in">array</span>[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="built_in">array</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_38：对角线之和">程序 38：对角线之和</h3><p>题目：求一个 3*3 矩阵对角线元素之和<br>1.程序分析：利用双重for循环控制输入二维数组，再将a[i][i]累加后输出。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> max <span class="keyword">int</span> = <span class="number">3</span></span><br><span class="line">    var <span class="built_in">array</span> [max][max]<span class="keyword">int</span></span><br><span class="line">    var sum <span class="keyword">int</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; max; i++ &#123;</span><br><span class="line">        <span class="keyword">for</span> j := <span class="number">0</span>; j &lt; max; j++ &#123;</span><br><span class="line">            fmt.Printf(<span class="string">"array[%d][%d]="</span>, i, j)</span><br><span class="line">            fmt.Scanf(<span class="string">"%d\n"</span>, &amp;<span class="built_in">array</span>[i][j])</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; max; i++ &#123;</span><br><span class="line">        sum += <span class="built_in">array</span>[i][i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; max; i++ &#123;</span><br><span class="line">        sum += <span class="built_in">array</span>[i][max-i-<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> max%<span class="number">2</span> == <span class="number">1</span> &#123;</span><br><span class="line">        sum -= <span class="built_in">array</span>[max/<span class="number">2</span>][max/<span class="number">2</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_39：插入元素">程序 39：插入元素</h3><p>题目：有一个已经排好序的数组。现输入一个数，要求按原来的规律将它插入数组中。 </p>
<ol>
<li>程序分析：首先判断此数是否大于最后一个数，然后再考虑插入中间的数的情况，插入后此元素之后的数，依次后移一个位置。<br>2.程序源代码：</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var number <span class="keyword">int</span></span><br><span class="line">    var <span class="built_in">array</span> = [<span class="number">11</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">19</span>, <span class="number">28</span>, <span class="number">40</span>, <span class="number">100</span>&#125;</span><br><span class="line">    fmt.Printf(<span class="string">"insert a new number:"</span>)</span><br><span class="line">    fmt.Scanf(<span class="string">"%d"</span>, &amp;number)</span><br><span class="line">    <span class="built_in">array</span>[<span class="number">10</span>] = number</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">10</span>; i &gt; <span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">array</span>[i] &lt; <span class="built_in">array</span>[i-<span class="number">1</span>] &#123;</span><br><span class="line">            <span class="built_in">array</span>[i], <span class="built_in">array</span>[i-<span class="number">1</span>] = <span class="built_in">array</span>[i-<span class="number">1</span>], <span class="built_in">array</span>[i]</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="built_in">array</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_40：数组逆序输出">程序 40：数组逆序输出</h3><p>题目：将一个数组逆序输出。<br>1.程序分析：用第一个与最后一个交换。<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">package main</span><br><span class="line"><span class="title">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    var <span class="built_in">array</span> = [<span class="number">10</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">19</span>, <span class="number">28</span>, <span class="number">40</span>, <span class="number">100</span>&#125;</span><br><span class="line">    count := len(<span class="built_in">array</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &gt; count/<span class="number">2</span>; i++ &#123;</span><br><span class="line">        <span class="built_in">array</span>[i], <span class="built_in">array</span>[count-i-<span class="number">1</span>] = <span class="built_in">array</span>[count-i-<span class="number">1</span>], <span class="built_in">array</span>[i]</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Println(<span class="built_in">array</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_41：位运算">程序 41：位运算</h3><p>题目：取一个整数 a 从右端开始的 4～7 位。<br>程序分析：可以这样考虑：<br>(1)先使 a 右移 4 位。<br>(2)设置一个低 4 位全为 1,其余全为 0 的数。可用~(~0&lt;&lt;4)<br>(3)将上面二者进行&amp;运算。<br>2.程序源代码：</p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package main</span><br><span class="line"><span class="built_in">import</span> <span class="params">(</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">)</span></span><br><span class="line">func main<span class="params">()</span> &#123;</span><br><span class="line">    var a int</span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"input a number:"</span>)</span></span><br><span class="line">    fmt.Scanf<span class="params">(<span class="string">"%d\n"</span>, &amp;a)</span></span><br><span class="line">    b := a &gt;&gt; <span class="number">4</span></span><br><span class="line">    c := ^<span class="params">(^<span class="number">0</span> &lt;&lt; <span class="number">4</span>)</span></span><br><span class="line">    d := b &amp; c</span><br><span class="line">    fmt.Printf<span class="params">(<span class="string">"%o\n%o\n"</span>, a, d)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_42：">程序 42：</h3><p>题目：画图，学用 circle 画圆形。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/circle/ </span><br><span class="line"><span class="string">"graphics.h"</span> </span><br><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> driver,mode,i; </span><br><span class="line"><span class="keyword">float</span> j=<span class="number">1</span>,k=<span class="number">1</span>; </span><br><span class="line">driver=VGA;mode=VGAHI; </span><br><span class="line">initgraph(&amp;driver,&amp;mode,<span class="string">""</span>); </span><br><span class="line">setbkcolor(YELLOW); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">25</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line">setcolor(<span class="number">8</span>); </span><br><span class="line">circle(<span class="number">310</span>,<span class="number">250</span>,k); </span><br><span class="line">k=k+j; </span><br><span class="line">j=j+<span class="number">0.3</span>; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_43：">程序 43：</h3><p>题目：画图，学用 line 画直线。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"graphics.h"</span> </span><br><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> driver,mode,i; </span><br><span class="line"><span class="keyword">float</span> x0,y0,y1,x1; </span><br><span class="line"><span class="keyword">float</span> j=<span class="number">12</span>,k; </span><br><span class="line">driver=VGA;mode=VGAHI; </span><br><span class="line">initgraph(&amp;driver,&amp;mode,<span class="string">""</span>); </span><br><span class="line">setbkcolor(GREEN); </span><br><span class="line">x0=<span class="number">263</span>;y0=<span class="number">263</span>;y1=<span class="number">275</span>;x1=<span class="number">275</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">18</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line">setcolor(<span class="number">5</span>); </span><br><span class="line">line(x0,y0,x0,y1); </span><br><span class="line">x0=x0-<span class="number">5</span>; </span><br><span class="line">y0=y0-<span class="number">5</span>; </span><br><span class="line">x1=x1+<span class="number">5</span>; </span><br><span class="line">y1=y1+<span class="number">5</span>; </span><br><span class="line">j=j+<span class="number">10</span>; </span><br><span class="line">&#125; </span><br><span class="line">x0=<span class="number">263</span>;y1=<span class="number">275</span>;y0=<span class="number">263</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">20</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line">setcolor(<span class="number">5</span>); </span><br><span class="line">line(x0,y0,x0,y1); </span><br><span class="line">x0=x0+<span class="number">5</span>; </span><br><span class="line">y0=y0+<span class="number">5</span>; </span><br><span class="line">y1=y1-<span class="number">5</span>; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_44：">程序 44：</h3><p>题目：画图，学用 rectangle 画方形。<br>1.程序分析：利用 for 循环控制 100-999 个数，每个数分解出个位，十位，百位。<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"graphics.h"</span> </span><br><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> x0,y0,y1,x1,driver,mode,i; </span><br><span class="line">driver=VGA;mode=VGAHI; </span><br><span class="line">initgraph(&amp;driver,&amp;mode,<span class="string">""</span>); </span><br><span class="line">setbkcolor(YELLOW); </span><br><span class="line">x0=<span class="number">263</span>;y0=<span class="number">263</span>;y1=<span class="number">275</span>;x1=<span class="number">275</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">18</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line">setcolor(<span class="number">1</span>); </span><br><span class="line">rectangle(x0,y0,x1,y1); </span><br><span class="line">x0=x0-<span class="number">5</span>; </span><br><span class="line">y0=y0-<span class="number">5</span>; </span><br><span class="line">x1=x1+<span class="number">5</span>; </span><br><span class="line">y1=y1+<span class="number">5</span>; </span><br><span class="line">&#125; </span><br><span class="line">settextstyle(DEFAULT_FONT,HORIZ_DIR,<span class="number">2</span>); </span><br><span class="line">outtextxy(<span class="number">150</span>,<span class="number">40</span>,<span class="string">"How beautiful it is!"</span>); </span><br><span class="line">line(<span class="number">130</span>,<span class="number">60</span>,<span class="number">480</span>,<span class="number">60</span>); </span><br><span class="line">setcolor(<span class="number">2</span>); </span><br><span class="line">circle(<span class="number">269</span>,<span class="number">269</span>,<span class="number">137</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_45：">程序 45：</h3><p>题目：打印出杨辉三角形（要求打印出 10 行如下图）<br>1.程序分析：<br>1<br>1 1<br>1 2 1<br>1 3 3 1<br>1 4 6 4 1<br>1 5 10 10 5 1<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> i,j; </span><br><span class="line"><span class="keyword">int</span> a[<span class="number">10</span>][<span class="number">10</span>]; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) </span><br><span class="line">&#123;a[i][<span class="number">0</span>]=<span class="number">1</span>; </span><br><span class="line">a[i][i]=<span class="number">1</span>;&#125; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">10</span>;i++) </span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">1</span>;j a[i][j]=a[i -<span class="number">1</span>][j -<span class="number">1</span>]+a[i -<span class="number">1</span>][j]; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++) </span><br><span class="line">&#123;<span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;=i;j++) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"]"</span>,a[i][j]); </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>); </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_46：">程序 46：</h3><p>题目：学习 putpixel 画点。<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"graphics.h"</span> </span><br><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> i,j,driver=VGA,mode= VGAHI; </span><br><span class="line">initgraph(&amp;driver,&amp;mode,<span class="string">""</span>); </span><br><span class="line">setbkcolor(YELLOW); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">50</span>;i&lt;=<span class="number">230</span>;i+=<span class="number">20</span>) </span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">50</span>;j&lt;=<span class="number">230</span>;j++) </span><br><span class="line">putpixel(i,j,<span class="number">1</span>); </span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">50</span>;j&lt;=<span class="number">230</span>;j+=<span class="number">20</span>) </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">50</span>;i&lt;=<span class="number">230</span>;i++) </span><br><span class="line">putpixel(i,j,<span class="number">1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_47：">程序 47：</h3><p>题目：画椭圆 ellipse<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"graphics.h"</span> </span><br><span class="line"><span class="string">"conio.h"</span> </span><br><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> x=<span class="number">360</span>,y=<span class="number">160</span>,driver=VGA,mode=VGAHI; </span><br><span class="line"><span class="keyword">int</span> num=<span class="number">20</span>,i; </span><br><span class="line"><span class="keyword">int</span> top,bottom; </span><br><span class="line">initgraph(&amp;driver,&amp;mode,<span class="string">""</span>); </span><br><span class="line">top=y-<span class="number">30</span>; </span><br><span class="line">bottom=y-<span class="number">30</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&#123; </span><br><span class="line">ellipse(<span class="number">250</span>,<span class="number">250</span>,<span class="number">0</span>,<span class="number">360</span>,top,bottom); </span><br><span class="line">top-=<span class="number">5</span>; </span><br><span class="line">bottom+=<span class="number">5</span>; </span><br><span class="line">&#125; </span><br><span class="line">getch(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_68：">程序 68：</h3><p>题目：有 n 个整数，使其前面各数顺序向后移 m 个位置，最后 m 个数变成最前面的 m 个数<br>1.程序分析： </p>
<ol>
<li>程序源代码： </li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> number[<span class="number">20</span>],n,m,i; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"the total numbers is:"</span>); </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n); </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"back m:"</span>); </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;<span class="function">i <span class="title">scanf</span><span class="params">(<span class="string">"%d,"</span>,&amp;number[i])</span></span>; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;number[n-<span class="number">1</span>]); </span><br><span class="line">move(number,n,m); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;<span class="function">i <span class="title">printf</span><span class="params">(<span class="string">"%d,"</span>,number[i])</span></span>; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,number[n-<span class="number">1</span>]); </span><br><span class="line">&#125; </span><br><span class="line">move(<span class="built_in">array</span>,n,m) </span><br><span class="line"><span class="keyword">int</span> n,m,<span class="built_in">array</span>[<span class="number">20</span>]; </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> p,array_end; </span><br><span class="line">array_end=(<span class="built_in">array</span>+n-<span class="number">1</span>); </span><br><span class="line"><span class="keyword">for</span>(p=<span class="built_in">array</span>+n-<span class="number">1</span>;p&gt;<span class="built_in">array</span>;p --) </span><br><span class="line">p=(p-<span class="number">1</span>); </span><br><span class="line">*<span class="built_in">array</span>=array_end; </span><br><span class="line">m--; </span><br><span class="line"><span class="keyword">if</span>(m&gt;<span class="number">0</span>) move(<span class="built_in">array</span>,n,m); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_69：">程序 69：</h3><p>题目：有 n 个人围成一圈，顺序排号。从第一个人开始报数（从 1 到 3 报数），凡报到 3 的<br>人退出<br>圈子，问最后留下的是原来第几号的那位。 </p>
<ol>
<li>程序分析：<br>2.程序源代码： </li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">define nmax <span class="number">50</span> </span><br><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">int</span> i,k,m,n,num[nmax],*p; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"please input the total of numbers:"</span>); </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n); </span><br><span class="line">p=num; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i (p+i)=i+<span class="number">1</span>; </span><br><span class="line">i =<span class="number">0</span>; </span><br><span class="line">k=<span class="number">0</span>; </span><br><span class="line">m=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">while</span>(m &#123; </span><br><span class="line"><span class="keyword">if</span>((p+i)!=<span class="number">0</span>) k++; </span><br><span class="line"><span class="keyword">if</span>(k==<span class="number">3</span>) </span><br><span class="line">&#123; *(p+i)=<span class="number">0</span>; </span><br><span class="line">k=<span class="number">0</span>; </span><br><span class="line">m++; </span><br><span class="line">&#125; </span><br><span class="line">i++; </span><br><span class="line"><span class="keyword">if</span>(i==n) i=<span class="number">0</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">while</span>(*p==<span class="number">0</span>) p++; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d is left\n"</span>,*p); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_72：">程序 72：</h3><p>题目：创建一个链表。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/creat a <span class="built_in">list</span>/ </span><br><span class="line"><span class="string">"stdlib.h"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> </span><br><span class="line">&#123; <span class="keyword">int</span> data; </span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> *next; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">list</span> node; </span><br><span class="line"><span class="keyword">typedef</span> node *link; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span><br><span class="line"></span>&#123; link ptr,head; </span><br><span class="line"><span class="keyword">int</span> num,i; </span><br><span class="line">ptr=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line">ptr=head; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"please input 5 numbers==&gt;\n"</span>); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;num); </span><br><span class="line">ptr-&gt;data=num; </span><br><span class="line">ptr-&gt;next=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">4</span>) ptr -&gt;next=<span class="literal">NULL</span>; </span><br><span class="line"><span class="keyword">else</span> ptr=ptr-&gt;next; </span><br><span class="line">&#125; </span><br><span class="line">ptr=head; </span><br><span class="line"><span class="keyword">while</span>(ptr!=<span class="literal">NULL</span>) </span><br><span class="line">&#123; <span class="built_in">printf</span>(<span class="string">"The value is ==&gt;%d\n"</span>,ptr-&gt;data); </span><br><span class="line">ptr=ptr-&gt;next; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_73：">程序 73：</h3><p>题目：反向输出一个链表。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/reverse output a <span class="built_in">list</span>/ </span><br><span class="line"><span class="string">"stdlib.h"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> </span><br><span class="line">&#123; <span class="keyword">int</span> data; </span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> *next; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">list</span> node; </span><br><span class="line"><span class="keyword">typedef</span> node *link; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span><br><span class="line"></span>&#123; link ptr,head,tail; </span><br><span class="line"><span class="keyword">int</span> num,i; </span><br><span class="line">tail=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line">tail -&gt;next=<span class="literal">NULL</span>; </span><br><span class="line">ptr=tail; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\nplease input 5 data==&gt;\n"</span>); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;i++) </span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;num); </span><br><span class="line">ptr-&gt;data=num; </span><br><span class="line">head=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line">head-&gt;next=ptr; </span><br><span class="line">ptr=head; </span><br><span class="line">&#125; </span><br><span class="line">ptr=ptr-&gt;next; </span><br><span class="line"><span class="keyword">while</span>(ptr!=<span class="literal">NULL</span>) </span><br><span class="line">&#123; <span class="built_in">printf</span>(<span class="string">"The value is ==&gt;%d\n"</span>,ptr-&gt;data); </span><br><span class="line">ptr=ptr-&gt;next; </span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_74：">程序 74：</h3><p>题目：连接两个链表。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"stdlib.h"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> </span><br><span class="line">&#123; <span class="keyword">int</span> data; </span><br><span class="line"><span class="keyword">struct</span> <span class="built_in">list</span> *next; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">list</span> node; </span><br><span class="line"><span class="keyword">typedef</span> node *link; </span><br><span class="line"><span class="function">link <span class="title">delete_node</span><span class="params">( link pointer,link tmp)</span> </span><br><span class="line"></span>&#123;<span class="keyword">if</span> (tmp==<span class="literal">NULL</span>) /<span class="keyword">delete</span> fir st node/ </span><br><span class="line"><span class="keyword">return</span> pointer-&gt;next; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123; <span class="keyword">if</span>(tmp-&gt;next- &gt;next==<span class="literal">NULL</span>)/<span class="keyword">delete</span> last node/ </span><br><span class="line">tmp-&gt;next=<span class="literal">NULL</span>; </span><br><span class="line"><span class="keyword">else</span> /<span class="keyword">delete</span> the other node/ </span><br><span class="line">tmp-&gt;next=tmp-&gt;next- &gt;next; </span><br><span class="line"><span class="keyword">return</span> pointer; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selection_sort</span><span class="params">(link pointer,<span class="keyword">int</span> num)</span> </span><br><span class="line"></span>&#123; link tmp,btmp; </span><br><span class="line"><span class="keyword">int</span> i, min; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i &#123; </span><br><span class="line">tmp=pointer; </span><br><span class="line">min=tmp-&gt;data; </span><br><span class="line">btmp=<span class="literal">NULL</span>; </span><br><span class="line"><span class="keyword">while</span>(tmp-&gt;next) </span><br><span class="line">&#123; <span class="keyword">if</span>(min&gt;tmp-&gt;next-&gt;data) </span><br><span class="line">&#123;min=tmp-&gt;next-&gt;data; </span><br><span class="line">btmp=tmp; </span><br><span class="line">&#125; </span><br><span class="line">tmp=tmp-&gt;next; </span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\40: %d\n"</span>,min); </span><br><span class="line">pointer=delete_node(pointer,btmp); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">link <span class="title">create_list</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[],<span class="keyword">int</span> num)</span> </span><br><span class="line"></span>&#123; link tmp1,tmp2,pointer; </span><br><span class="line"><span class="keyword">int</span> i; </span><br><span class="line">pointer=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line">pointer-&gt;data=<span class="built_in">array</span>[<span class="number">0</span>]; </span><br><span class="line">tmp1=pointer; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&#123; tmp2=(link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(node)); </span><br><span class="line">tmp2-&gt;next=<span class="literal">NULL</span>; </span><br><span class="line">tmp2-&gt;data=<span class="built_in">array</span>[i]; </span><br><span class="line">tmp1-&gt;next=tmp2; </span><br><span class="line">tmp1=tmp1-&gt;next; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> pointer; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function">link <span class="title">concatenate</span><span class="params">(link pointer1,link pointer2)</span> </span><br><span class="line"></span>&#123; link tmp; </span><br><span class="line">tmp=pointer1; </span><br><span class="line"><span class="keyword">while</span>(tmp-&gt;next) </span><br><span class="line">tmp=tmp-&gt;next; </span><br><span class="line">tmp-&gt;next=pointer2; </span><br><span class="line"><span class="keyword">return</span> pointer1; </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span><br><span class="line"></span>&#123; <span class="keyword">int</span> arr1[]=&#123;<span class="number">3</span>,<span class="number">12</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>&#125;; </span><br><span class="line">link ptr; </span><br><span class="line">ptr=create_list(arr1,<span class="number">5</span>); </span><br><span class="line">selection_sort(ptr,<span class="number">5</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_76：">程序 76：</h3><p>题目：编写一个函数，输入 n 为偶数时，调用函数求 1/2+1/4+…+1/n,当输入 n 为奇数时，调<br>用函数<br>1/1+1/3+…+1/n(利用指针函数)<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">peven</span><span class="params">()</span>,<span class="title">podd</span><span class="params">()</span>,<span class="title">dcall</span><span class="params">()</span></span>; </span><br><span class="line"><span class="keyword">float</span> sum; </span><br><span class="line"><span class="keyword">int</span> n; </span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) </span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n); </span><br><span class="line"><span class="keyword">if</span>(n&gt;<span class="number">1</span>) </span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">if</span>(n%<span class="number">2</span>==<span class="number">0</span>) </span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Even="</span>); </span><br><span class="line">sum=dcall(peven,n); </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"Odd="</span>); </span><br><span class="line">sum=dcall(podd,n); </span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%f"</span>,sum); </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">peven</span><span class="params">(<span class="keyword">int</span> n)</span> </span><br><span class="line"></span>&#123; </span><br><span class="line"><span class="keyword">float</span> s; </span><br><span class="line"><span class="keyword">int</span> i; </span><br><span class="line">s=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;=n;i+=<span class="number">2</span>) </span><br><span class="line">s+=<span class="number">1</span>/(<span class="keyword">float</span>)i; </span><br><span class="line"><span class="keyword">return</span>(s); </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">podd</span><span class="params">(n)</span> </span><br><span class="line"><span class="keyword">int</span> n</span>; </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">float</span> s; </span><br><span class="line"><span class="keyword">int</span> i; </span><br><span class="line">s=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i+=<span class="number">2</span>) </span><br><span class="line">s+=<span class="number">1</span>/(<span class="keyword">float</span>)i; </span><br><span class="line"><span class="keyword">return</span>(s); </span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">dcall</span><span class="params">(fp,n)</span> </span><br><span class="line"><span class="title">float</span> <span class="params">(*fp)</span><span class="params">()</span></span>; </span><br><span class="line"><span class="keyword">int</span> n; </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">float</span> s; </span><br><span class="line">s=(*fp)(n); </span><br><span class="line"><span class="keyword">return</span>(s); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_80：">程序 80：</h3><p>题目：海滩上有一堆桃子，五只猴子来分。第一只猴子把这堆桃子凭据分为五份，多了一个，<br>这只<br>猴子把多的一个扔入海中，拿走了一份。第二只猴子把剩下的桃子又平均分成五份，又多了<br>一个，它同样把多的一个扔入海中，拿走了一份，第三、第四、第五只猴子都是这样做的，<br>问海滩上原来最少有多少个桃子？<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> i,m,j,k,count; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">4</span>;i&lt;<span class="number">10000</span>;i+=<span class="number">4</span>) </span><br><span class="line">&#123; count=<span class="number">0</span>; </span><br><span class="line">m=i; </span><br><span class="line"><span class="keyword">for</span>(k=<span class="number">0</span>;k&lt;<span class="number">5</span>;k++) </span><br><span class="line">&#123; </span><br><span class="line">j=i/<span class="number">4</span>*<span class="number">5</span>+<span class="number">1</span>; </span><br><span class="line">i =j; </span><br><span class="line"><span class="keyword">if</span>(j%<span class="number">4</span>==<span class="number">0</span>) </span><br><span class="line">count++; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line">&#125; </span><br><span class="line">i=m; </span><br><span class="line"><span class="keyword">if</span>(count==<span class="number">4</span>) </span><br><span class="line">&#123;<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,count); </span><br><span class="line"><span class="keyword">break</span>;&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_81：">程序 81：</h3><p>题目：809<em>??=800</em>??+9<em>??+1 其中??代表的两位数,8</em>??的结果为两位数，9<em>?? 的结果为 3<br>位数。求??代表的两位数，及 809</em>??后的结果。<br>1.程序分析：<br>2.程序源代码：<br>output(long b,long i)<br>{ printf(“\n%ld/%ld=809<em>%ld+%ld”,b,i,i,b%i);<br>}<br>main()<br>{long int a,b,i;<br>a=809;<br>for(i=10;i&lt;100;i++)<br>{b=i</em>a+1;<br>if(b&gt;=1000&amp;&amp;b&lt;=10000&amp;&amp;8<em>i&lt;100&amp;&amp;9</em>i&gt;=100)<br>output(b,i); }<br>}</p>
<h3 id="程序_82：">程序 82：</h3><p>题目：八进制转换为十进制<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; <span class="keyword">char</span> p,s[<span class="number">6</span>];<span class="keyword">int</span> n; </span><br><span class="line">p=s; </span><br><span class="line">gets(p); </span><br><span class="line">n=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">while</span>((p)!=<span class="string">'\0'</span>) </span><br><span class="line">&#123;n=n*<span class="number">8</span>+*p-<span class="string">'0'</span>; </span><br><span class="line">p++;&#125; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,n); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_83：">程序 83：</h3><p>题目：求 0—7 所能组成的奇数个数。<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">long</span> sum=<span class="number">4</span>,s=<span class="number">4</span>; </span><br><span class="line"><span class="keyword">int</span> j; </span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">2</span>;j&lt;=<span class="number">8</span>;j++)/j is place of number/ </span><br><span class="line">&#123; <span class="built_in">printf</span>(<span class="string">"\n%ld"</span>,sum); </span><br><span class="line"><span class="keyword">if</span>(j&lt;=<span class="number">2</span>) </span><br><span class="line">s*=<span class="number">7</span>; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">s*=<span class="number">8</span>; </span><br><span class="line">sum+=s;&#125; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\nsum=%ld"</span>,sum); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_84：">程序 84：</h3><p>题目：一个偶数总能表示为两个素数之和。<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; <span class="keyword">int</span> a,b,c,d; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a); </span><br><span class="line"><span class="keyword">for</span>(b=<span class="number">3</span>;b&lt;=a/<span class="number">2</span>;b+=<span class="number">2</span>) </span><br><span class="line">&#123; <span class="keyword">for</span>(c=<span class="number">2</span>;c&lt;=<span class="built_in">sqrt</span>(b);c++) </span><br><span class="line"><span class="keyword">if</span>(b%c==<span class="number">0</span>) <span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">if</span>(c&gt;<span class="built_in">sqrt</span>(b)) </span><br><span class="line">d=a-b; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">for</span>(c=<span class="number">2</span>;c&lt;=<span class="built_in">sqrt</span>(d);c++) </span><br><span class="line"><span class="keyword">if</span>(d%c==<span class="number">0</span>) <span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">if</span>(c&gt;<span class="built_in">sqrt</span>(d)) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d=%d+%d\n"</span>,a,b,d); </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_85：">程序 85：</h3><p>题目：判断一个素数能被几个 9 整除<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123; <span class="keyword">long</span> <span class="keyword">int</span> m9=<span class="number">9</span>,sum=<span class="number">9</span>; </span><br><span class="line"><span class="keyword">int</span> zi,n1=<span class="number">1</span>,c9=<span class="number">1</span>; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;zi); </span><br><span class="line"><span class="keyword">while</span>(n1!=<span class="number">0</span>) </span><br><span class="line">&#123; <span class="keyword">if</span>(!(sum%zi)) </span><br><span class="line">n1=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;m9=m9*<span class="number">10</span>; </span><br><span class="line">sum=sum+m9; </span><br><span class="line">c9++; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%ld,can be divided by %d \"9\""</span>,sum,c9); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_88：">程序 88：</h3><p>题目：读取 7 个数（1—50）的整数值，每读取一个值，程序打印出该值个数的＊。<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> i,a,n=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">while</span>(n&lt;=<span class="number">7</span>) </span><br><span class="line">&#123; <span class="keyword">do</span> &#123; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a); </span><br><span class="line">&#125;<span class="keyword">while</span>(a&lt;<span class="number">1</span>||a&gt;<span class="number">50</span>); </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=a;i++) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"*"</span>); </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>); </span><br><span class="line">n++;&#125; </span><br><span class="line">getch(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_89：">程序 89：</h3><p>题目：某个公司采用公用电话传递数据，数据是四位的整数，在传递过程中是加密的，加密<br>规则如下：<br>每位数字都加上 5,然后用和除以 10 的余数代替该数字，再将第一位和第四位交换，第二位<br>和第三位交换。<br>1.程序分析：<br>2.程序源代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">main() </span><br><span class="line">&#123;<span class="keyword">int</span> a,i,aa[<span class="number">4</span>],t; </span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a); </span><br><span class="line">aa[<span class="number">0</span>]=a ; </span><br><span class="line">aa1=a <span class="number">0</span>/<span class="number">10</span>; </span><br><span class="line">aa[<span class="number">2</span>]=a <span class="number">00</span>/<span class="number">100</span>; </span><br><span class="line">aa[<span class="number">3</span>]=a/<span class="number">1000</span>; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">3</span>;i++) </span><br><span class="line">&#123;aa[i]+=<span class="number">5</span>; </span><br><span class="line">aa[i]%=<span class="number">10</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=<span class="number">3</span>/<span class="number">2</span>;i++) </span><br><span class="line">&#123;t=aa[i]; </span><br><span class="line">aa[i]=aa[<span class="number">3</span>-i]; </span><br><span class="line">aa[<span class="number">3</span>-i]=t; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">3</span>;i&gt;=<span class="number">0</span>;i --) </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>,aa[i]); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="程序_94：">程序 94：</h3><p>题目：时间函数举例 4,一个猜数游戏，判断一个人反应快慢。（版主初学时编的）<br>1.程序分析：<br>2.程序源代码： </p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"time.h"</span> </span><br><span class="line"><span class="string">"stdlib.h"</span></span><br><span class="line"></span><br><span class="line">main<span class="params">()</span> </span><br><span class="line">&#123;char c; </span><br><span class="line">clock_t start,end; </span><br><span class="line">time_t a,b; </span><br><span class="line">double var; </span><br><span class="line">int i,guess; </span><br><span class="line">srand<span class="params">(time<span class="params">(NULL)</span>)</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"do you want to play it.('y' or 'n') \n"</span>)</span>; </span><br><span class="line">loop: </span><br><span class="line">while<span class="params">(<span class="params">(c=getchar<span class="params">()</span>)</span>=='y')</span> </span><br><span class="line">&#123; </span><br><span class="line">i=rand<span class="params">()</span> <span class="number">0</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"\nplease input number you guess:\n"</span>)</span>; </span><br><span class="line">start=clock<span class="params">()</span>; </span><br><span class="line">a=time<span class="params">(NULL)</span>; </span><br><span class="line">scanf<span class="params">(<span class="string">"%d"</span>,&amp;guess)</span>; </span><br><span class="line">while<span class="params">(guess!=i)</span> </span><br><span class="line">&#123;<span class="keyword">if</span><span class="params">(guess&gt;i)</span> </span><br><span class="line">&#123;printf<span class="params">(<span class="string">"please input a little smaller. \n"</span>)</span>; </span><br><span class="line">scanf<span class="params">(<span class="string">"%d"</span>,&amp;guess)</span>;&#125; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;printf<span class="params">(<span class="string">"please input a little bigger. \n"</span>)</span>; </span><br><span class="line">scanf<span class="params">(<span class="string">"%d"</span>,&amp;guess)</span>;&#125; </span><br><span class="line">&#125; </span><br><span class="line">end=clock<span class="params">()</span>; </span><br><span class="line">b=time<span class="params">(NULL)</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"\1: It took you %6.3f seconds \n"</span>,var=<span class="params">(double)</span><span class="params">(end-start)</span>/<span class="number">18.2</span>)</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"\1: it took you %6.3f seconds \n \n"</span>,difftime<span class="params">(b,a)</span>)</span>; </span><br><span class="line"><span class="keyword">if</span><span class="params">(var&lt;<span class="number">15</span>)</span> </span><br><span class="line">printf<span class="params">(<span class="string">"\1\1 You are very clever! \1\1\n \n"</span>)</span>; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span><span class="params">(var&lt;<span class="number">25</span>)</span> </span><br><span class="line">printf<span class="params">(<span class="string">"\1\1 you are normal! \1\1\n\n"</span>)</span>; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">printf<span class="params">(<span class="string">"\1\1 you are stupid! \1\1\n\n"</span>)</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"\1\1 Congradulations \1\1\n\n"</span>)</span>; </span><br><span class="line">printf<span class="params">(<span class="string">"The number you guess is %d"</span>,i)</span>; </span><br><span class="line">&#125; </span><br><span class="line">printf<span class="params">(<span class="string">"\ndo you want to try it again?(\"yy\".or. \"n\")\n"</span>)</span>; </span><br><span class="line"><span class="keyword">if</span><span class="params">(<span class="params">(c=getch<span class="params">()</span>)</span>=='y')</span> </span><br><span class="line">goto loop; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/">Go</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Logstash-学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/09/Logstash-学习笔记/" class="article-date">
  	<time datetime="2015-10-09T06:20:49.000Z" itemprop="datePublished">2015-10-09</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/09/Logstash-学习笔记/">Logstash 学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#简介</p>
<ol>
<li><p>Logstash 是一个完全开源的工具，他可以对你的日志进行收集、分析，并将其存储供以后使用（如，搜索），您可以使用它。说到搜索，logstash带有一个web界面，搜索和展示所有日志。</p>
</li>
<li><p>kibana 也是一个开源和免费的工具，他可以帮助您汇总、分析和搜索重要数据日志并提供友好的web界面。他可以为 Logstash 和 ElasticSearch 提供的日志分析的 Web 界面</p>
</li>
</ol>
<h1 id="流程">流程</h1><p>简单来讲他具体的工作流程就是 logstash agent 监控并过滤日志，将过滤后的日志内容发给redis(这里的redis只处理队列不做存储)，logstash index将日志收集在一起交给全文搜索服务ElasticSearch 可以用ElasticSearch进行自定义搜索 通过Kibana 来结合自定义搜索进行页面展示，下图是 Kibana官网上的流程图</p>
<p><img src="/assets/blogImg/logstash.png" alt="Logstash"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Logstash/">Logstash</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Lua极简入门指南（一）：基础知识篇" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/10/08/Lua极简入门指南（一）：基础知识篇/" class="article-date">
  	<time datetime="2015-10-08T09:48:44.000Z" itemprop="datePublished">2015-10-08</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/08/Lua极简入门指南（一）：基础知识篇/">Lua极简入门指南（一）：基础知识篇</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Chunks">Chunks</h2><h5 id="一个_Chunk_就是一组被执行的语句，例如一个文件或者交互模式下的一行。">一个 Chunk 就是一组被执行的语句，例如一个文件或者交互模式下的一行。</h5><h2 id="标识符（identifiers）">标识符（identifiers）</h2><h5 id="我们应该避免使用以___开头并跟上一个或者多个大写字母的字符串来作标识符，它们被保留作特殊的用途（例如：_VERSION）。">我们应该避免使用以 _ 开头并跟上一个或者多个大写字母的字符串来作标识符，它们被保留作特殊的用途（例如：_VERSION）。</h5><h2 id="注释">注释</h2><h5 id="单行注释使用">单行注释使用</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--</span></span><br></pre></td></tr></table></figure>
<h5 id="多行注释使用">多行注释使用</h5><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--[[ 和 --]]</span></span><br></pre></td></tr></table></figure>
<h2 id="类型简介">类型简介</h2><h5 id="Lua_存在的数据类型包括：">Lua 存在的数据类型包括：</h5><ol>
<li><p>nil。此类型只有一个值 nil。用于表示“空”值。全局变量默认为 nil，删除一个已经赋值的全局变量只需要将其赋值为 nil（对比 JavaScript，赋值 null 并不能完全删除对象的属性，属性还存在，值为 null）</p>
</li>
<li><p>boolean。此类型有两个值 true 和 false。在 Lua 中，false 和 nil 都表示条件假，其他值都表示条件真（区别于 C/C++ 等语言的是，0 是真）</p>
</li>
<li><p>number。双精浮点数（IEEE 754 标准），Lua 没有整数类型</p>
</li>
<li><p>string。你可以保存任意的二进制数据到字符串中（包括 0）。字符串中的字符是不可以改变的（需要改变时，你只能创建一个新的字符串）。获取字符串的长度，可以使用 # 操作符（长度操作符）。例如：print(#”hello”)。字符串可以使用单引号，也可以使用双引号包裹，对于多行的字符串还可以使用 [[ 和 ]] 包裹。字符串中可以使用转义字符，例如 \n \r 等。使用 [[ 和 ]] 包裹的字符串中的转义字符不会被转义</p>
</li>
<li><p>userdata。用于保存任意的 C 数据。userdata 只能支持赋值操作和比较测试</p>
</li>
<li><p>function。函数是第一类值（first-class value），我们能够像使用其他变量一样的使用函数（函数能够保存在变量中，可以作为参数传递给函数）</p>
</li>
<li><p>thread。区别于我们常常说的系统级线程</p>
</li>
<li><p>table。被实现为关联数组（associative arrays），可以通过任何值来进行索引（nil 除外）。和全局变量一样，table 中未赋值的域为 nil，删除一个域只需要将其赋值为 nil（实际上，全局变量就是被放置在一个 table 中）</p>
</li>
</ol>
<hr>
<h5 id="type_函数用于返回值的类型：">type 函数用于返回值的类型：</h5><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(type(<span class="string">"Hello World"</span>))</span> --&gt;</span> string</span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(type(<span class="number">10.4</span>*<span class="number">3</span>))</span>        --&gt;</span> number</span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(type(<span class="built_in">print</span>))</span>         --&gt;</span> <span class="keyword">function</span></span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(type(type(X)))</span>       --&gt;</span> string</span><br></pre></td></tr></table></figure>
<p>在 Lua 中，任何的变量都可以保存任何的值。</p>
<h2 id="table_使用简介">table 使用简介</h2><h5 id="使用构造表达式可以创建一个_table：">使用构造表达式可以创建一个 table：</h5><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">- 创建一个空的 table</span><br><span class="line"></span>a = &#123;&#125;</span><br><span class="line"> </span><br><span class="line">-<span class="ruby">- 创建并初始化一个 table，这里</span><br><span class="line"></span>-<span class="ruby">- days[<span class="number">1</span>] == <span class="string">"Sunday"</span></span><br><span class="line"></span>-<span class="ruby">- days[<span class="number">2</span>] == <span class="string">"Monday"</span></span><br><span class="line"></span>-<span class="ruby">- ...</span><br><span class="line"></span>days = &#123; "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" &#125;</span><br><span class="line"> </span><br><span class="line">-<span class="ruby">- 创建并初始化一个 table，这里</span><br><span class="line"></span>-<span class="ruby">- a[<span class="string">"x"</span>] == <span class="number">10</span></span><br><span class="line"></span>-<span class="ruby">- a[<span class="string">"y"</span>] == <span class="number">20</span></span><br><span class="line"></span>a = &#123; x = 10, y = 20 &#125;</span><br></pre></td></tr></table></figure>
<h5 id="使用_[]_操作符访问_table_的域：">使用 [] 操作符访问 table 的域：</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">a</span> = &#123;&#125;</span><br><span class="line">k = <span class="string">"x"</span></span><br><span class="line"><span class="operator">a</span>[k] = <span class="number">10</span></span><br><span class="line"><span class="operator">a</span>[<span class="string">"x"</span>] = <span class="number">20</span></span><br><span class="line">print(<span class="operator">a</span>[<span class="string">"y"</span>]) <span class="comment">--&gt; nil</span></span><br><span class="line"><span class="operator">a</span>.x = <span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>注意，a.name 的语法等价于 a[“name”]。</p>
<h5 id="table_可以用于表示数组，这时候索引为整数，并且从_1（而非_0）开始，例如：">table 可以用于表示数组，这时候索引为整数，并且从 1（而非 0）开始，例如：</h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="setting">a = <span class="value">&#123; <span class="string">'a'</span>, <span class="string">'b'</span> &#125;</span></span></span><br><span class="line"><span class="setting">a[1] =<span class="value">= <span class="string">'a'</span></span></span></span><br><span class="line"><span class="setting">a[2] =<span class="value">= <span class="string">'b'</span></span></span></span><br></pre></td></tr></table></figure>
<h5 id="长度操作符可以获取_table_数组部分的长度：">长度操作符可以获取 table <strong>数组部分</strong>的长度：</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">a</span> = &#123;&#125;</span><br><span class="line"><span class="operator">a</span>[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line"><span class="operator">a</span>[<span class="number">2</span>] = <span class="number">2</span></span><br><span class="line">print(<span class="comment">#a) --&gt; 2</span></span><br><span class="line"> </span><br><span class="line"><span class="operator">a</span>.<span class="operator">a</span> = <span class="number">1</span></span><br><span class="line"><span class="operator">a</span>.b = <span class="number">2</span></span><br><span class="line">print(<span class="comment">#a) --&gt; 2</span></span><br><span class="line"> </span><br><span class="line"><span class="operator">a</span> = &#123;&#125;</span><br><span class="line"><span class="operator">a</span>.<span class="operator">a</span> = <span class="number">1</span></span><br><span class="line"><span class="operator">a</span>.b = <span class="number">2</span></span><br><span class="line">print(<span class="comment">#a) --&gt; 0</span></span><br></pre></td></tr></table></figure>
<h2 id="表达式">表达式</h2><h5 id="算术操作符">算术操作符</h5><ol>
<li>+（加）</li>
<li>-（减）</li>
<li>*（乘）</li>
<li>/（除）</li>
<li>^（幂）</li>
<li>%（取模）</li>
</ol>
<h5 id="任何算术操作符都试图将操作数转换为数值类型，例如：">任何算术操作符都试图将操作数转换为数值类型，例如：</h5><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(<span class="number">10</span> + <span class="string">'1'</span>)</span> --&gt;</span> <span class="number">11</span></span><br></pre></td></tr></table></figure>
<h5 id="关系操作符">关系操作符</h5><ol>
<li>&lt;（小于）</li>
<li>>（大于）</li>
<li>&lt;=（小于等于）</li>
<li>>=（大于等于）</li>
<li>==（等于）</li>
<li>~=（不等于）</li>
</ol>
<h5 id="两个不同类型的值是不相等的，例如：">两个不同类型的值是不相等的，例如：</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">nil</span> ~= <span class="keyword">false</span></span><br></pre></td></tr></table></figure>
<h5 id="table、userdata_类型是通过引用进行比较的，例如：">table、userdata 类型是通过引用进行比较的，例如：</h5><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">a</span> = &#123;&#125;<span class="comment">; a.x = 1; a.y = 0</span></span><br><span class="line">b = &#123;&#125;<span class="comment">; b.x = 1; b.y = 0</span></span><br><span class="line">c = <span class="literal">a</span></span><br></pre></td></tr></table></figure>
<p>这里 a 和 c 引用一个相同的对象，因此 a == c，但是 a ~= b（即便 a、b 内容相同）。</p>
<h5 id="逻辑操作符">逻辑操作符</h5><ol>
<li>and</li>
<li>or</li>
<li>not</li>
</ol>
<p>逻辑操作符有返回值。对于 and 操作来说，如果第一个操作数为 false 时返回此操作数，否则返回第二个操作数。对于 or 操作来说，如果第一个操作数不为 false 时返回此操作数，否则返回第二个操作数。</p>
<h5 id="连接操作符">连接操作符</h5><h5 id="字符串连接可以使用连接操作符_“-”，例如：">字符串连接可以使用连接操作符 “..”，例如：</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"Hello "</span> .. <span class="string">"World"</span>)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="连接操作符试图将操作数转化为字符串，例如：">连接操作符试图将操作数转化为字符串，例如：</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">print</span><span class="params">(<span class="string">"number: "</span> .. <span class="number">1</span>)</span></span></span><br></pre></td></tr></table></figure>
<h2 id="语句">语句</h2><h5 id="多赋值（multiple_assignment）支持，例如：">多赋值（multiple assignment）支持，例如：</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">a</span>, <span class="tag">b</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(a)</span></span> --&gt; <span class="number">1</span></span><br><span class="line"><span class="function"><span class="title">print</span><span class="params">(b)</span></span> --&gt; <span class="number">2</span></span><br></pre></td></tr></table></figure>
<h5 id="多赋值的一个惯用法就是交换两个变量的值：">多赋值的一个惯用法就是交换两个变量的值：</h5><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x, y = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">x, y = y, x</span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(x)</span> --&gt;</span> <span class="number">2</span></span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(y)</span> --&gt;</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h5 id="创建局部变量使用_local：">创建局部变量使用 local：</h5><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">j</span> = <span class="number">10</span>       -- 全局变量 <span class="built_in">j</span></span><br><span class="line">local <span class="built_in">i</span> = <span class="number">10</span> -- 局部变量 <span class="built_in">i</span></span><br></pre></td></tr></table></figure>
<h5 id="局部变量的作用域限制于他们声明的块（block）。块（block）包括：">局部变量的作用域限制于他们声明的块（block）。块（block）包括：</h5><ol>
<li>控制结构的主体部分</li>
<li>函数体</li>
<li>chunk</li>
<li>do-end</li>
</ol>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="literal">true</span> <span class="keyword">then</span></span><br><span class="line">    local x = <span class="number">20</span></span><br><span class="line">    <span class="built_in">print</span><span class="function"><span class="params">(x)</span> --&gt;</span> <span class="number">20</span></span><br><span class="line">end</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(x)</span> --&gt;</span> nil</span><br></pre></td></tr></table></figure>
<h5 id="我们可以使用_do-end_关键字来构造一个块：">我们可以使用 do-end 关键字来构造一个块：</h5><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">    local x = <span class="number">20</span></span><br><span class="line">    <span class="built_in">print</span><span class="function"><span class="params">(x)</span> --&gt;</span> <span class="number">20</span></span><br><span class="line">end</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span><span class="function"><span class="params">(x)</span> --&gt;</span> nil</span><br></pre></td></tr></table></figure>
<h5 id="访问局部变量要快于访问全局变量。在_Lua_中有一个习惯用法：">访问局部变量要快于访问全局变量。在 Lua 中有一个习惯用法：</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> foo = foo</span><br></pre></td></tr></table></figure>
<h5 id="用于创建一个局部变量并初始化为同名的全局变量。这样做常常出于两个原因：">用于创建一个局部变量并初始化为同名的全局变量。这样做常常出于两个原因：</h5><ol>
<li>避免某些类型的全局变量被修改</li>
<li>提高访问速度</li>
</ol>
<h2 id="控制结构">控制结构</h2><h5 id="if_then_elseif_else">if then elseif else</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="operator">a</span> &lt; <span class="number">0</span> <span class="keyword">then</span></span><br><span class="line">    <span class="operator">a</span> = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="title">if</span> <span class="title">a</span> &lt; <span class="title">b</span> <span class="title">then</span></span></span><br><span class="line">    <span class="constant">return</span> <span class="operator">a</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="constant">return</span> b</span><br><span class="line"><span class="function"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="title">if</span> <span class="title">op</span> == '+' <span class="title">then</span></span></span><br><span class="line">    r = <span class="operator">a</span> + b</span><br><span class="line">elseif op == <span class="string">'-'</span> <span class="keyword">then</span></span><br><span class="line">    r = <span class="operator">a</span> - b</span><br><span class="line">elseif op == <span class="string">'*'</span> <span class="keyword">then</span></span><br><span class="line">    r = <span class="operator">a</span> * b</span><br><span class="line">elseif op == <span class="string">'/'</span> <span class="keyword">then</span></span><br><span class="line">    r = <span class="operator">a</span> / b</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    error(<span class="string">'invalid operation'</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Lua 中没有 switch 语句。</p>
<h5 id="while">while</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">local</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="operator">a</span>[i] <span class="built_in">do</span></span><br><span class="line">    print(<span class="operator">a</span>[i])</span><br><span class="line">    i = i + <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h5 id="repeat">repeat</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">repeat</span></span><br><span class="line">    <span class="built_in">line</span> = io.<span class="built_in">read</span>()</span><br><span class="line"><span class="keyword">until</span> <span class="built_in">line</span> ~= <span class="string">''</span></span><br><span class="line">print(<span class="built_in">line</span>)</span><br></pre></td></tr></table></figure>
<p>区别于 while，repeat 会先执行循环体，然后判断测试条件。</p>
<h5 id="数值型_for（numeric_for）">数值型 for（numeric for）</h5><p>for 有两种：</p>
<ol>
<li>数值型 for（numeric for）</li>
<li>泛型 for（generic for）</li>
</ol>
<p>数值型 for 的语法如下：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> var = <span class="built_in">exp1</span>, <span class="built_in">exp2</span>, exp3 <span class="built_in">do</span></span><br><span class="line">    &lt;something&gt;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>这里 exp1 作为 var 的初始值，exp2 为 var 的最大值，exp3 为 var 每次递增的值，exp3 是可选的，默认为 1。范例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 输出 <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, <span class="number">3</span> <span class="function"><span class="keyword">do</span></span><br><span class="line">    <span class="title">print</span><span class="params">(i)</span></span><br><span class="line">end</span></span><br></pre></td></tr></table></figure>
<p>有一些需要注意的地方：</p>
<ol>
<li>for 中的 exp1、exp2、exp3 只会被计算一次值，例如：</li>
</ol>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i = <span class="number">1</span>, f(x) <span class="keyword">do</span> <span class="built_in">print</span>(i) <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>这里的 f(x) 只会被调用一次</p>
<ol>
<li>控制变量 var 只是一个局部变量</li>
<li>不要尝试去修改控制变量 var 的值（结果是未知的）</li>
</ol>
<h2 id="泛型_for">泛型 for</h2><h5 id="泛型_for_通过一个迭代器函数来实现遍历，例如：">泛型 for 通过一个迭代器函数来实现遍历，例如：</h5><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> <span class="built_in">pairs</span>(t) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>这里的 pairs 就是一个迭代器函数，此 for 循环遍历 table t，每次获取到的 key 保存在变量 k 中，获取到的 value 保存在变量 v 中。除了 pairs 还有其他的迭代器可以用：</p>
<ol>
<li>io.lines 可用于迭代文件中的行</li>
<li>ipairs 可用于迭代 table 的数组部分</li>
</ol>
<p>我们还可以自己编写迭代器。</p>
<h2 id="break、return、goto">break、return、goto</h2><p>break 语句用于跳出一个循环（for、repeat、while）。</p>
<p>return 语句用于为函数返回结果。在 Lua 中，return 语句必须是一个块的最后一条语句，看一个例子：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- 语法错误</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">local</span> i = <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>有时候，我们出于某些原因（例如为了 debug），我们需要在一个函数中插入一个 return 语句，这时候可以这么做：</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">-- ...</span></span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">return</span> <span class="keyword">end</span></span><br><span class="line">    <span class="comment">-- ...</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>goto 语句用于在函数中跳转。goto 语句可以让执行跳转到特定的标签（label）处，例如：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">goto quit</span><br><span class="line">print(<span class="emphasis">'come on'</span>)</span><br><span class="line"><span class="attribute">::quit::</span></span><br><span class="line">print(<span class="emphasis">'quit'</span>)</span><br></pre></td></tr></table></figure>
<p>这里输出 quit。正如我们看到的，标签的写法为 ::name::。goto 跳转也是存在限制的：</p>
<ol>
<li>不允许跳转到一个块中去</li>
<li>不允许跳转到函数之外去</li>
<li>不允许跳入局部变量的作用域中</li>
</ol>
<p>对于第三点，看一个例子：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">goto quit</span><br><span class="line">local a</span><br><span class="line"><span class="attribute">::quit::</span></span><br><span class="line">print(<span class="emphasis">'quit'</span>)</span><br></pre></td></tr></table></figure>
<p>执行成功，没有语法错误。这是因为局部变量的作用域结束于变量定义的块的最后一个非 void 语句，而标签被认为是一个 void 语句，对于上面的例子来说，a 的作用域在 ::quit:: 之前就结束了，因此 goto quit 并没有跳入局部变量 a 的作用域中。</p>
<p>利用 goto 可以比较方便的编写状态机，例如（s1、s2 为状态）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">::s1:: <span class="operator"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">c</span> = io.<span class="keyword">read</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">c</span> == <span class="string">'0'</span> <span class="keyword">then</span> <span class="keyword">goto</span> s2</span><br><span class="line">    elseif <span class="keyword">c</span> == nil <span class="keyword">then</span> print<span class="string">'ok'</span>;</span> return</span><br><span class="line">    else goto s1</span><br><span class="line">    <span class="operator"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line">::s2:: <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">local</span> <span class="keyword">c</span> = io.<span class="keyword">read</span>(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">c</span> == <span class="string">'0'</span> <span class="keyword">then</span> <span class="keyword">goto</span> s1</span><br><span class="line">    elseif <span class="keyword">c</span> == nil <span class="keyword">then</span> print<span class="string">'not ok'</span>;</span> return</span><br><span class="line">    else goto s2</span><br><span class="line">    <span class="operator"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">goto</span> s1</span></span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Linux信号（signal）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/28/Linux信号（signal）/" class="article-date">
  	<time datetime="2015-09-28T06:54:18.000Z" itemprop="datePublished">2015-09-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/28/Linux信号（signal）/">Linux信号（signal）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">SIGHUP                    终止进程                     终端线路挂断</span><br><span class="line">SIGINT                    终止进程                     中断进程</span><br><span class="line">SIGQUIT                   建立CORE文件                 终止进程，并且生成core文件</span><br><span class="line">SIGILL                    建立CORE文件                 非法指令</span><br><span class="line">SIGTRAP                   建立CORE文件                 跟踪自陷</span><br><span class="line">SIGBUS                    建立CORE文件                 总线错误</span><br><span class="line">SIGSEGV                   建立CORE文件                 段非法错误</span><br><span class="line">SIGFPE                    建立CORE文件                 浮点异常</span><br><span class="line">SIGIOT                    建立CORE文件                 执行<span class="keyword">I</span>/<span class="keyword">O</span>自陷</span><br><span class="line">SIGKILL                   终止进程                     杀死进程</span><br><span class="line">SIGPIPE                   终止进程                     向一个没有读进程的管道写数据</span><br><span class="line">SIGALARM                  终止进程                     计时器到时</span><br><span class="line">SIGTERM                   终止进程                     软件终止信号</span><br><span class="line">SIGSTOP                   停止进程                     非终端来的停止信号</span><br><span class="line">SIGTSTP                   停止进程                     终端来的停止信号</span><br><span class="line">SIGCONT                   忽略信号                     继续执行一个停止的进程</span><br><span class="line">SIGURG                    忽略信号                     <span class="keyword">I</span>/<span class="keyword">O</span>紧急信号</span><br><span class="line">SIGIO                     忽略信号                     描述符上可以进行<span class="keyword">I</span>/<span class="keyword">O</span></span><br><span class="line">SIGCHLD                   忽略信号                     当子进程停止或退出时通知父进程</span><br><span class="line">SIGTTOU                   停止进程                     后台进程写终端</span><br><span class="line">SIGTTIN                   停止进程                     后台进程读终端</span><br><span class="line">SIGXGPU                   终止进程                     CPU时限超时</span><br><span class="line">SIGXFSZ                   终止进程                     文件长度过长</span><br><span class="line">SIGWINCH                  忽略信号                     窗口大小发生变化</span><br><span class="line">SIGPROF                   终止进程                     统计分布图用计时器到时</span><br><span class="line">SIGUSR1                   终止进程                     用户定义信号<span class="number">1</span></span><br><span class="line">SIGUSR2                   终止进程                     用户定义信号<span class="number">2</span></span><br><span class="line">SIGVTALRM                 终止进程                     虚拟计时器到时</span><br></pre></td></tr></table></figure>
<ol>
<li><p>SIGHUP 本信号在用户终端连接(正常或非正常)结束时发出, 通常是在终端的控制进程结束时, 通知同一session内的各个作业, 这时它们与控制终端不再关联. </p>
</li>
<li><p>SIGINT 程序终止(interrupt)信号, 在用户键入INTR字符(通常是Ctrl-C)时发出. </p>
</li>
<li><p>SIGQUIT 和SIGINT类似, 但由QUIT字符(通常是Ctrl-)来控制. 进程在因收到SIGQUIT退出时会产生core文件, 在这个意义上类似于一个程序错误信号. </p>
</li>
<li><p>SIGILL 执行了非法指令. 通常是因为可执行文件本身出现错误, 或者试图执行数据段. 堆栈溢出时也有可能产生这个信号. </p>
</li>
<li><p>SIGTRAP 由断点指令或其它trap指令产生. 由debugger使用. </p>
</li>
<li><p>SIGABRT 程序自己发现错误并调用abort时产生. </p>
</li>
<li><p>SIGIOT 在PDP-11上由iot指令产生, 在其它机器上和SIGABRT一样. </p>
</li>
<li><p>SIGBUS 非法地址, 包括内存地址对齐(alignment)出错. eg: 访问一个四个字长的整数, 但其地址不是4的倍数. </p>
</li>
<li><p>SIGFPE 在发生致命的算术运算错误时发出. 不仅包括浮点运算错误, 还包括溢出及除数为0等其它所有的算术的错误. </p>
</li>
<li><p>SIGKILL 用来立即结束程序的运行. 本信号不能被阻塞, 处理和忽略. </p>
</li>
<li><p>SIGUSR1 留给用户使用. </p>
</li>
<li><p>SIGSEGV 试图访问未分配给自己的内存, 或试图往没有写权限的内存地址写数据. </p>
</li>
<li><p>SIGUSR2 留给用户使用. </p>
</li>
<li><p>SIGPIPE Broken pipe. </p>
</li>
<li><p>SIGALRM 时钟定时信号, 计算的是实际的时间或时钟时间. alarm函数使用该信号. </p>
</li>
<li><p>SIGTERM 程序结束(terminate)信号, 与SIGKILL不同的是该信号可以被阻塞和处理. 通常用来要求程序自己正常退出. shell命令kill缺省产生这个信号. </p>
</li>
<li><p>SIGCHLD 子进程结束时, 父进程会收到这个信号. </p>
</li>
<li><p>SIGCONT 让一个停止(stopped)的进程继续执行. 本信号不能被阻塞. 可以用一个handler来让程序在由stopped状态变为继续执行时完成特定的工作. 例如, 重新显示提示符. </p>
</li>
<li><p>SIGSTOP 停止(stopped)进程的执行. 注意它和terminate以及interrupt的区别:该进程还未结束, 只是暂停执行. 本信号不能被阻塞, 处理或忽略.</p>
</li>
<li><p>SIGTSTP 停止进程的运行, 但该信号可以被处理和忽略. 用户键入SUSP字符时(通常是Ctrl-Z)发出这个信号. </p>
</li>
<li><p>SIGTTIN 当后台作业要从用户终端读数据时, 该作业中的所有进程会收到SIGTTIN信号. 缺省时这些进程会停止执行. </p>
</li>
<li><p>SIGTTOU 类似于SIGTTIN, 但在写终端(或修改终端模式)时收到. </p>
</li>
<li><p>SIGURG 有”紧急”数据或out-of-band数据到达socket时产生. </p>
</li>
<li><p>SIGXCPU 超过CPU时间资源限制. 这个限制可以由getrlimit/setrlimit来读取/改变. </p>
</li>
<li><p>SIGXFSZ 超过文件大小资源限制. </p>
</li>
<li><p>SIGVTALRM 虚拟时钟信号. 类似于SIGALRM, 但是计算的是该进程占用的CPU时间. </p>
</li>
<li><p>SIGPROF 类似于SIGALRM/SIGVTALRM, 但包括该进程用的CPU时间以及系统调用的时间. </p>
</li>
<li><p>SIGWINCH 窗口大小改变时发出. </p>
</li>
<li><p>SIGIO 文件描述符准备就绪, 可以开始进行输入/输出操作. </p>
</li>
<li><p>SIGPWR Power failure. </p>
</li>
</ol>
<h5 id="有两个信号可以停止进程:SIGTERM和SIGKILL。">有两个信号可以停止进程:SIGTERM和SIGKILL。</h5><ul>
<li><p>SIGTERM比较友好，进程能捕捉这个信号，根据您的需要来关闭程序。在关闭程序之前，您可以结束打开的记录文件和完成正在做的任务。在某些情况下，假如进程正在进行作业而且不能中断，那么进程可以忽略这个SIGTERM信号。</p>
</li>
<li><p>对于SIGKILL信号，进程是不能忽略的。这是一个 “我不管您在做什么,立刻停止”的信号。假如您发送SIGKILL信号给进程，Linux就将进程停止在那里。</p>
</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Golang-优秀的第三方库" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/24/Golang-优秀的第三方库/" class="article-date">
  	<time datetime="2015-09-24T02:21:34.000Z" itemprop="datePublished">2015-09-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/24/Golang-优秀的第三方库/">Golang 优秀的第三方库</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>websocketwebsocket压测工具 - <a href="https://github.com/torfuzx/thor" target="_blank" rel="external">Thor</a></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/">Go</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-日志输出性能优化-缓存、异步" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/23/日志输出性能优化-缓存、异步/" class="article-date">
  	<time datetime="2015-09-23T09:07:12.000Z" itemprop="datePublished">2015-09-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/23/日志输出性能优化-缓存、异步/">日志输出性能优化-缓存、异步</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="日志对系统性能的影响程度主要体现在以下几方面：">日志对系统性能的影响程度主要体现在以下几方面：</h4><ol>
<li><p>日志输出的目的地，输出到控制台的速度比输出到文件系统的速度要慢。</p>
</li>
<li><p>日志输出格式不一样对性能也会有影响，如简单输出布局(SimpleLayout)比格式化输出布局(PatternLayout)<br>输出速度要快。可以根据需要尽量采用简单输出布局格式输出日志信息。</p>
</li>
<li><p>日志级别越低输出的日志内容就越多，对系统系能影响很大。</p>
</li>
<li><p>日志输出方式的不同，对系统系能也是有一定影响的，采用异步输出方式比同步输出方式性能要高。</p>
</li>
<li><p>每次接收到日志输出事件就打印一条日志内容比当日志内容达到一定大小时打印系能要低。</p>
</li>
</ol>
<ul>
<li><p>同步情况：<br>各线程直接获得输出流进行输出(线程间不需要同步)。</p>
</li>
<li><p>异步情况：</p>
</li>
</ul>
<ol>
<li>各线程将日志写到缓存，继续执行下面的任务(这里是异步的)</li>
<li>日志线程发现需要记日志时独占缓存(与此同时各线程等待，此时各线程是被阻塞住的)，从缓存中取出日志信息，获得输出流进行输出，将缓存解锁(各线程收到提醒，可以接着写日志了) </li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Log/">Log</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Golang-Seelog-入门" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/09/17/Golang-Seelog-入门/" class="article-date">
  	<time datetime="2015-09-17T06:37:10.000Z" itemprop="datePublished">2015-09-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/17/Golang-Seelog-入门/">Golang Seelog 入门</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="日志应用">日志应用</h2><p>我们期望开发的Web应用程序能够把整个程序运行过程中出现的各种事件一一记录下来，Go语言中提供了一个简易的log包，我们使用该包可以方便的实现日志记录的功能，这些日志都是基于fmt包的打印再结合panic之类的函数来进行一般的打印、抛出错误处理。Go目前标准包只是包含了简单的功能，如果我们想把我们的应用日志保存到文件，然后又能够结合日志实现很多复杂的功能，可以使用第三方开发的一个日志系统（项目之前使用logrus）。<br><a href="https://github.com/cihub/seelog" target="_blank" rel="external">seelog</a>，通过该日志系统来实现我们应用的日志功能。</p>
<h3 id="seelog_介绍">seelog 介绍</h3><p>seelog是用Go语言实现的一个日志系统，它提供了一些简单的函数来实现复杂的日志分配、过滤和格式化。主要有如下特性：</p>
<ul>
<li>XML的动态配置，可以不用重新编译程序而动态的加载配置信息</li>
<li>支持热更新，能够动态改变配置而不需要重启应用</li>
<li>支持多输出流，能够同时把日志输出到多种流中、例如文件流、网络流等</li>
<li>支持不同的日志输出<ul>
<li>命令行输出</li>
<li>文件输出</li>
<li>缓存输出</li>
<li>支持log rotate</li>
<li>SMTP邮件</li>
</ul>
</li>
</ul>
<h3 id="seelog_的好处">seelog 的好处</h3><ol>
<li>seelog 本身接口丰富，同时有 debug, info, error, critical 及带 *f 两套接口，即 Debug, 和 Debugf, 类型于 Print 和 Printf</li>
<li>seelog 可通过配置文件来配置一些特性，甚至还可以在运行时能过改变配置来改变输出</li>
<li>seelog 支持生成各种形式的日志文件，比如单纯的 log 文件，根据日期生成类似 yyy.mm.dd.log 文件，根据 size 生成类似 debug.1.log, debug.2.log 文件，而且支持压缩格式</li>
<li>seelog 支持多个输出及分流输出，比如 Debug() 输出到 debug.log，Info()和Error() 输出到 控制台 和 msg.log 文件<br>seelog 支持自定义输出格式</li>
</ol>
<h3 id="seelog_的缺点">seelog 的缺点</h3><ol>
<li>配置文件只支持xml（本人更偏好yaml）</li>
</ol>
<h3 id="入门教程">入门教程</h3><h4 id="配置文件_etc/seelog-xml">配置文件 etc/seelog.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">seelog</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">outputs</span> <span class="attribute">formatid</span>=<span class="value">"main"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">levels</span>=<span class="value">"info,critical,error"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">console</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">levels</span>=<span class="value">"debug"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">file</span> <span class="attribute">path</span>=<span class="value">"log/debug.txt"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">outputs</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="title">formats</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">format</span> <span class="attribute">id</span>=<span class="value">"main"</span> <span class="attribute">format</span>=<span class="value">"%Date/%Time [%LEV] %Msg%n"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">formats</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">seelog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>&lt;outputs&gt; 的作用是把所有输出都重定向到其子节点表示的输出端， formatid=”main” 表示输出格式根据 id=”main” 那个节点显示。<br>&lt;filter&gt; 用来过滤log的等级，比如，所有 info, critical, error 等级的log才会被写入该子节点。<br>&lt;file&gt; 就不解释了，一目了然，如果想知道如何实现上面提到的其他特性，请直接点对应的链接进去。</p>
</blockquote>
<h4 id="代码">代码</h4><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">defer <span class="built_in">log</span>.Flush<span class="params">()</span></span><br><span class="line"><span class="comment">// init log</span></span><br><span class="line"></span><br><span class="line">logger, err = <span class="built_in">log</span>.LoggerFromConfigAsFile<span class="params">(<span class="string">"etc/seelog.xml"</span>)</span></span><br><span class="line"><span class="keyword">if</span> err <span class="built_in">!</span>= nil &#123;</span><br><span class="line"><span class="built_in">log</span>.Critical<span class="params">(<span class="string">"err parsing config log file"</span>, err)</span></span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">log</span>.ReplaceLogger<span class="params">(logger)</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">log</span>.Info<span class="params">(<span class="string">"Hello from Seelog!"</span>)</span></span><br></pre></td></tr></table></figure>
<h3 id="进阶：基于seelog的自定义日志处理">进阶：基于seelog的自定义日志处理</h3><h4 id="配置文件_etc/seelog-xml-1">配置文件 etc/seelog.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">seelog</span> <span class="attribute">minlevel</span>=<span class="value">"warn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">outputs</span> <span class="attribute">formatid</span>=<span class="value">"common"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">rollingfile</span> <span class="attribute">type</span>=<span class="value">"size"</span> <span class="attribute">filename</span>=<span class="value">"/data/logs/roll.log"</span> <span class="attribute">maxsize</span>=<span class="value">"100000"</span> <span class="attribute">maxrolls</span>=<span class="value">"5"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">filter</span> <span class="attribute">levels</span>=<span class="value">"critical"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">file</span> <span class="attribute">path</span>=<span class="value">"/data/logs/critical.log"</span> <span class="attribute">formatid</span>=<span class="value">"critical"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">smtp</span> <span class="attribute">formatid</span>=<span class="value">"criticalemail"</span> <span class="attribute">senderaddress</span>=<span class="value">"astaxie@gmail.com"</span> <span class="attribute">sendername</span>=<span class="value">"ShortUrl API"</span> <span class="attribute">hostname</span>=<span class="value">"smtp.gmail.com"</span> <span class="attribute">hostport</span>=<span class="value">"587"</span> <span class="attribute">username</span>=<span class="value">"mailusername"</span> <span class="attribute">password</span>=<span class="value">"mailpassword"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">recipient</span> <span class="attribute">address</span>=<span class="value">"xiemengjun@gmail.com"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">smtp</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">outputs</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">formats</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">format</span> <span class="attribute">id</span>=<span class="value">"common"</span> <span class="attribute">format</span>=<span class="value">"%Date/%Time [%LEV] %Msg%n"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">format</span> <span class="attribute">id</span>=<span class="value">"critical"</span> <span class="attribute">format</span>=<span class="value">"%File %FullPath %Func %Msg%n"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">format</span> <span class="attribute">id</span>=<span class="value">"criticalemail"</span> <span class="attribute">format</span>=<span class="value">"Critical error on our server!\n    %Time %Date %RelFile %Func %Msg \nSent by Seelog"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">formats</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">seelog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="代码-1">代码</h4><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">defer <span class="built_in">log</span>.Flush<span class="params">()</span></span><br><span class="line"><span class="comment">// init log</span></span><br><span class="line"></span><br><span class="line">logger, err = <span class="built_in">log</span>.LoggerFromConfigAsFile<span class="params">(<span class="string">"etc/seelog.xml"</span>)</span></span><br><span class="line"><span class="keyword">if</span> err <span class="built_in">!</span>= nil &#123;</span><br><span class="line"><span class="built_in">log</span>.Critical<span class="params">(<span class="string">"err parsing config log file"</span>, err)</span></span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">log</span>.ReplaceLogger<span class="params">(logger)</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">log</span>.Info<span class="params">(<span class="string">"Hello from Seelog!"</span>)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">package logs</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"fmt"</span></span><br><span class="line">    seelog <span class="string">"github.com/cihub/seelog"</span></span><br><span class="line">    <span class="string">"io"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="type">Logger</span> seelog.<span class="type">LoggerInterface</span></span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">loadAppConfig</span><span class="params">()</span></span> &#123;</span><br><span class="line">    logger, err = log.<span class="type">LoggerFromConfigAsFile</span>(<span class="string">"etc/seelog.xml"</span>)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        fmt.<span class="type">Println</span>(err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">UseLogger</span>(logger)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="type">DisableLog</span>()</span><br><span class="line">    loadAppConfig()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DisableLog disables all library log output</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">DisableLog</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="type">Logger</span> = seelog.<span class="type">Disabled</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// UseLogger uses a specified seelog.LoggerInterface to output library log.</span></span><br><span class="line"><span class="comment">// Use this func if you are using Seelog logging system in your app.</span></span><br><span class="line"><span class="func"><span class="keyword">func</span> <span class="title">UseLogger</span><span class="params">(newLogger seelog.LoggerInterface)</span></span> &#123;</span><br><span class="line">    <span class="type">Logger</span> = newLogger</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面主要实现了三个函数，</p>
<ul>
<li><p>DisableLog<br>初始化全局变量Logger为seelog的禁用状态，主要为了防止Logger被多次初始化</p>
</li>
<li><p>loadAppConfig<br>根据配置文件初始化seelog的配置信息，这里我们把配置文件通过字符串读取设置好了，当然也可以通过读取XML文件。里面的配置说明如下：</p>
<ul>
<li><p>seelog<br>minlevel参数可选，如果被配置,高于或等于此级别的日志会被记录，同理maxlevel。</p>
</li>
<li><p>outputs<br>输出信息的目的地，这里分成了两份数据，一份记录到log rotate文件里面。另一份设置了filter，如果这个错误级别是critical，那么将发送报警邮件。</p>
</li>
<li><p>formats<br>定义了各种日志的格式</p>
</li>
</ul>
</li>
<li><p>UseLogger<br>设置当前的日志器为相应的日志处理</p>
</li>
</ul>
<h4 id="上面我们定义了一个自定义的日志处理包，下面就是使用示例：">上面我们定义了一个自定义的日志处理包，下面就是使用示例：</h4><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">"net/http"</span></span><br><span class="line">    <span class="string">"project/logs"</span></span><br><span class="line">    <span class="string">"project/configs"</span></span><br><span class="line">    <span class="string">"project/routes"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function">func <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    addr, _ := configs.MainConfig.String(<span class="string">"server"</span>, <span class="string">"addr"</span>)</span><br><span class="line">    logs.Logger.Info(<span class="string">"Start server at:%v"</span>, addr)</span><br><span class="line">    err := http.ListenAndServe(addr, routes.NewMux())</span><br><span class="line">    logs.Logger.Critical(<span class="string">"Server err:%v"</span>, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="发生错误发送邮件">发生错误发送邮件</h3><p>上面的例子解释了如何设置发送邮件，我们通过如下的smtp配置用来发送邮件：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">smtp</span> <span class="attribute">formatid</span>=<span class="value">"criticalemail"</span> <span class="attribute">senderaddress</span>=<span class="value">"astaxie@gmail.com"</span> <span class="attribute">sendername</span>=<span class="value">"ShortUrl API"</span> <span class="attribute">hostname</span>=<span class="value">"smtp.gmail.com"</span> <span class="attribute">hostport</span>=<span class="value">"587"</span> <span class="attribute">username</span>=<span class="value">"mailusername"</span> <span class="attribute">password</span>=<span class="value">"mailpassword"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">recipient</span> <span class="attribute">address</span>=<span class="value">"xiemengjun@gmail.com"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">smtp</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>邮件的格式通过criticalemail配置，然后通过其他的配置发送邮件服务器的配置，通过recipient配置接收邮件的用户，如果有多个用户可以再添加一行。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logs<span class="class">.Logger</span><span class="class">.Critical</span>(<span class="string">"test Critical message"</span>)</span><br></pre></td></tr></table></figure></p>
<p>现在，只要我们的应用在线上记录一个Critical的信息，你的邮箱就会收到一个Email，这样一旦线上的系统出现问题，你就能立马通过邮件获知，就能及时的进行处理。</p>
<h3 id="使用应用日志">使用应用日志</h3><p>对于应用日志，每个人的应用场景可能会各不相同，有些人利用应用日志来做数据分析，有些人利用应用日志来做性能分析，有些人来做用户行为分析，还有些就是纯粹的记录，以方便应用出现问题的时候辅助查找问题。</p>
<p>举一个例子，我们需要跟踪用户尝试登陆系统的操作。这里会把成功与不成功的尝试都记录下来。记录成功的使用”Info”日志级别，而不成功的使用”warn”级别。如果想查找所有不成功的登陆，我们可以利用linux的grep之类的命令工具，如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># cat /data/logs/roll.log | grep <span class="string">"failed login"</span></span></span><br><span class="line"><span class="number">2012</span>-<span class="number">12</span>-<span class="number">11</span> <span class="number">11</span>:<span class="number">12</span>:<span class="number">00</span> WARN : failed login attempt from <span class="number">11.22</span><span class="number">.33</span><span class="number">.44</span> username password</span><br></pre></td></tr></table></figure>
<p>通过这种方式我们就可以很方便的查找相应的信息，这样有利于我们针对应用日志做一些统计和分析。另外我们还需要考虑日志的大小，对于一个高流量的Web应用来说，日志的增长是相当可怕的，所以我们在seelog的配置文件里面设置了logrotate，这样就能保证日志文件不会因为不断变大而导致我们的磁盘空间不够引起问题。</p>
<h3 id="log_rotate">log rotate</h3><p>日志文件包含了关于系统中发生的事件的有用信息，在排障过程中或者系统性能分析时经常被用到。对于忙碌的服务器，日志文件大小会增长极快，服务器会很快消耗磁盘空间，这成了个问题。除此之外，处理一个单个的庞大日志文件也常常是件十分棘手的事。</p>
<h5 id="Rolling_file_writer：_seelog的log_ratate">Rolling file writer： seelog的log ratate</h5><p>可以自动对日志进行截断（或轮循）、压缩以及删除旧的日志文件。例如，你可以设置etc/seelog.xml，让logs/roll.log日志文件已日期和大小轮循，并删除超过超过设置数量的最早的一个日志文件。配置完后，seelog的运作完全自动化，不必进行任何进一步的人为干预。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">seelog</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">outputs</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">rollingfile</span> <span class="attribute">type</span>=<span class="value">"size"</span> <span class="attribute">filename</span>=<span class="value">"logs/roll.log"</span> <span class="attribute">maxsize</span>=<span class="value">"1000"</span> <span class="attribute">maxrolls</span>=<span class="value">"5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">outputs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">seelog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">seelog</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">outputs</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">rollingfile</span> <span class="attribute">type</span>=<span class="value">"date"</span> <span class="attribute">filename</span>=<span class="value">"logs/roll.log"</span> <span class="attribute">datepattern</span>=<span class="value">"02.01.2006"</span> <span class="attribute">maxrolls</span>=<span class="value">"7"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">outputs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">seelog</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>namemode -命名卷文件的模式。<br>可能的参数：”postfix“-“后缀”，“prefix”-“前缀”。如果设置为“后缀”，卷文件看起来像“file.log.1”，“file.log.02.01.2006”。如果设置为“前缀”：“1.file.log’，’02 .01.2006.file.log”。默认值是“postfix”。</p>
</li>
<li><p>type -回转类型：“date”或“size”。</p>
</li>
<li><p>maxrolls -重命名的文件的最大数量。<br>如果超过此限制，较旧的卷被删除。参数应&gt;=0。注：之前版本2.3这个属性不适用于“date”的滚动。</p>
</li>
<li><p>archivetype - 用于指定旧卷的存储，而不是清除存档类型的属性。<br>可能的值：“none”，“ZIP”。如果设置为“none”，不执行归档（只删除旧卷）。</p>
</li>
<li><p>archivepath - 不设置的默认值为“none”。指定在存储就卷归档文件的路径。</p>
</li>
</ul>
<h4 id="设置type为“size”所使用的参数：">设置type为“size”所使用的参数：</h4><ul>
<li>maxsize -这是大小限制（以字节为单位），超过这会导致滚动。</li>
</ul>
<h4 id="设置type为“date”所使用的参数：">设置type为“date”所使用的参数：</h4><ul>
<li>datepattern -通过’time.Local().Format“的方法赋值，来形成文件名的模式。<br>“date”（实际上，这意味着日期和时间）。<br>例如“02.01.2006”,使用此格式表示按每天截断。或者，“02.01.2006.15”，使用此格式表示按每小时截断。</li>
</ul>
<h3 id="小结">小结</h3><p>通过上面对seelog系统及如何基于它进行自定义日志系统的学习，现在我们可以很轻松的随需构建一个合适的功能强大的日志处理系统了。日志处理系统为数据分析提供了可靠的数据源，比如通过对日志的分析，我们可以进一步优化系统，或者应用出现问题时方便查找定位问题，另外seelog也提供了日志分级功能，通过对minlevel的配置，我们可以很方便的设置测试或发布版本的输出消息级别。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Go/">Go</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-使用Github-Pages和Hexo搭建静态博客" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/27/使用Github-Pages和Hexo搭建静态博客/" class="article-date">
  	<time datetime="2015-08-27T02:48:32.000Z" itemprop="datePublished">2015-08-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/27/使用Github-Pages和Hexo搭建静态博客/">使用Github Pages和Hexo搭建静态博客</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="本博客是使用Github_Pages和Hexo搭建的静态博客，具体的搭建过程可参考不如的hexo你的博客，真的写的很详细，我就不再重复造轮子了。">本博客是使用Github Pages和Hexo搭建的静态博客，具体的搭建过程可参考不如的<a href="http://ibruce.info/2013/11/22/hexo-your-blog/" target="_blank" rel="external">hexo你的博客</a>，真的写的很详细，我就不再重复造轮子了。</h4>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-Go-IDE-搭建（Sublime-Text-3）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/08/26/Go-IDE-搭建（Sublime-Text-3）/" class="article-date">
  	<time datetime="2015-08-26T05:40:42.000Z" itemprop="datePublished">2015-08-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/26/Go-IDE-搭建（Sublime-Text-3）/">Go IDE 搭建（Sublime Text 3）</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="我的大环境">我的大环境</h3><h4 id="1-Fedora_22">1.Fedora 22</h4><h4 id="2-GO_1-5">2.GO 1.5</h4><h3 id="1-_安装Sublime_Text_3">1. 安装Sublime Text 3</h3><h4 id="1-_Sublime_Text_3（以下简称ST）的下载与安装,具体操作，请看我的博文。">1. Sublime Text 3（以下简称ST）的下载与安装,具体操作，请看我的博文。</h4><p><a href="http://golang.help/2015/08/24/Fedora%E4%B8%8B%E5%AE%89%E8%A3%9DSublime-Text-3/" target="_blank" rel="external">Fedora下安裝Sublime Text 3</a></p>
<h3 id="2-_安装Package_Control">2. 安装Package Control</h3><h4 id="1-_接下来还要注意就是ST3下PackageControl的安装，这个跟ST2上就不同了，因为更新了python的借口，用了python3，建议参考官方的方法：">1. 接下来还要注意就是ST3下PackageControl的安装，这个跟ST2上就不同了，因为更新了python的借口，用了python3，建议参考官方的方法：</h4><p><a href="https://sublime.wbond.net/installation" target="_blank" rel="external">https://sublime.wbond.net/installation</a></p>
<h4 id="2-_按住命令行_Ctrl+`_调出命令行输入以下代码:">2. 按住命令行 Ctrl+` 调出命令行输入以下代码:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request,os,hashlib; h = <span class="string">'eb2297e1a458f27d836c04bb0cbaf282'</span> + <span class="string">'d0e7a3098092775ccb37ca9d6b2e4b7d'</span>; pf = <span class="string">'Package Control.sublime-package'</span>; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( <span class="string">'http://packagecontrol.io/'</span> + pf.replace(<span class="string">' '</span>, <span class="string">'%20'</span>)).read(); dh = hashlib.sha256(by).hexdigest(); <span class="built_in">print</span>(<span class="string">'Error validating download (got %s instead of %s), please try manual install'</span> % (dh, h)) <span class="keyword">if</span> dh != h <span class="keyword">else</span> open(os.path.join( ipp, pf), <span class="string">'wb'</span> ).write(by)</span><br></pre></td></tr></table></figure>
<h4 id="3-_安装好以后重启ST，就能使用Package_Control了">3. 安装好以后重启ST，就能使用Package Control了</h4><h3 id="3-_安装GoSublime">3. 安装GoSublime</h3><h4 id="1-_按快捷键_Ctrl+Shift+p_键入_pci，选择第一个Install_Package，键入GoSublime，回车安装，安装好后重启，则可以写你自己的Go代码了。">1. 按快捷键 Ctrl+Shift+p 键入 pci，选择第一个Install Package，键入GoSublime，回车安装，安装好后重启，则可以写你自己的Go代码了。</h4><h4 id="2-_配置GoSublime，以下是我的配置。">2. 配置GoSublime，以下是我的配置。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"env"</span>: &#123;</span><br><span class="line">		<span class="string">"GOPATH"</span>: <span class="string">"~/gopath"</span>,</span><br><span class="line">		<span class="string">"GOROOT"</span>: <span class="string">"/usr/local/go"</span>,</span><br><span class="line">		&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="4-_推荐几个ST3的Go插件:">4. 推荐几个ST3的Go插件:</h3><blockquote>
<p>GoGDB<br>GoImports<br>GoOracle<br>Godef</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Sublime/">Sublime</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 別問
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>